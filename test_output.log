============================= test session starts ==============================
platform darwin -- Python 3.12.10, pytest-8.4.1, pluggy-1.6.0 -- /opt/homebrew/opt/python@3.12/bin/python3.12
cachedir: .pytest_cache
rootdir: /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot
configfile: setup.cfg
plugins: asyncio-1.1.0, xdist-3.8.0, postmarker-1.0, anyio-4.10.0, cov-6.2.1, langsmith-0.4.13, mock-3.14.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 877 items / 3 skipped

tests/backtest/test_dividends.py::TestDividends::test_yahoo_finance_dividends PASSED [  0%]
tests/backtest/test_dividends.py::TestDividends::test_polygon_dividends PASSED [  0%]
tests/backtest/test_dividends.py::TestDividends::test_compare_yahoo_vs_polygon_dividends PASSED [  0%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_stock_bracket XPASS [  0%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_stock_oco XPASS [  0%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_stock_buy_and_hold XFAIL [  0%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_stock_diversified_leverage XFAIL [  0%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_limit_and_trailing_stops XFAIL [  0%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_options_hold_to_expiry PASSED [  1%]
tests/backtest/test_example_strategies.py::TestExampleStrategies::test_ccxt_backtesting SKIPPED [  1%]
tests/backtest/test_failing_backtest.py::TestFailingBacktest::test_initialize_failure_raises_exception PASSED [  1%]
tests/backtest/test_failing_backtest.py::TestFailingBacktest::test_trading_iteration_failure_raises_exception PASSED [  1%]
tests/backtest/test_failing_backtest.py::TestFailingBacktest::test_backtest_classmethod_initialize_failure PASSED [  1%]
tests/backtest/test_failing_backtest.py::TestFailingBacktest::test_backtest_classmethod_trading_iteration_failure PASSED [  1%]
tests/backtest/test_pandas_backtest.py::TestPandasBacktest::test_pandas_data_fixture PASSED [  1%]
tests/backtest/test_pandas_backtest.py::TestPandasBacktest::test_pandas_datasource_with_daily_data_in_backtest PASSED [  1%]
tests/backtest/test_passing_trader_into_backtest.py::TestPassingTraderIntoBacktest::test_not_passing_trader_class_into_backtest_creates_generic_trader PASSED [  1%]
tests/backtest/test_passing_trader_into_backtest.py::TestPassingTraderIntoBacktest::test_passing_trader_class_into_backtest_creates_trader_class PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonBacktestFull::test_polygon_restclient PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonBacktestFull::test_intraday_daterange PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonBacktestFull::test_polygon_legacy_backtest XPASS [  2%]
tests/backtest/test_polygon.py::TestPolygonBacktestFull::test_polygon_legacy_backtest2 XPASS [  2%]
tests/backtest/test_polygon.py::TestPolygonBacktestFull::test_pull_source_symbol_bars_with_api_call PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonDataSource::test_get_historical_prices PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonDataSource::test_get_chains_spy_expected_data PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonDataSource::test_get_last_price_unchanged PASSED [  2%]
tests/backtest/test_polygon.py::TestPolygonDataSource::test_get_historical_prices_unchanged_for_amzn PASSED [  3%]
tests/backtest/test_thetadata.py::TestThetaDataBacktestFull::test_thetadata_restclient SKIPPED [  3%]
tests/backtest/test_yahoo.py::TestYahooBacktestFull::test_yahoo_last_price XFAIL [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_initialize_broker_legacy PASSED [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_submit_order_calls_conform_order PASSED [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_limit_order_conforms_when_limit_price_gte_one_dollar PASSED [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_limit_order_conforms_when_limit_price_lte_one_dollar PASSED [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_option_get_last_price SKIPPED [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_stock_get_last_price PASSED [  3%]
tests/test_alpaca.py::TestAlpacaBroker::test_crypto_get_last_price PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_get_historical_prices PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_option_get_historical_prices PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_oauth_broker_initialization PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_oauth_mixed_credentials PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_oauth_fallback_to_api_keys PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_oauth_error_on_missing_credentials PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_oauth_stream_object_creation PASSED [  4%]
tests/test_alpaca.py::TestAlpacaBroker::test_oauth_polling_interval PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_custom_params_extended_hours PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_custom_params_multiple_params PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_custom_params_none PASSED   [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_none_quantity PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_valid_quantity PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_zero_quantity PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_avg_fill_price_and_date_created PASSED [  5%]
tests/test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_without_avg_fill_price_and_date_created PASSED [  5%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_auth_failed_flag_not_set_for_network_errors PASSED [  6%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_auth_failed_flag_set_for_real_auth_errors PASSED [  6%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_reset_auth_failure_method PASSED [  6%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_client_initialization_with_network_error PASSED [  6%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_client_initialization_with_auth_error PASSED [  6%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_get_chains_blocked_after_auth_failure PASSED [  6%]
tests/test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_different_auth_error_patterns PASSED [  6%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_create_data_source PASSED [  6%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_basic_key_generation_crypto PASSED [  6%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_basic_key_generation_stock PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_with_auto_adjust PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_empty_market_false_auto_adjust PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_different_timezones PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_refresh_cache PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_no_refresh_cache PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_day_when_all_data_exists PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_day_when_missing_dates PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_day_when_missing_dates_beginning PASSED [  7%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_minute_when_missing_dates PASSED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d PASSED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_5 FAILED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_minute_1d PASSED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_minute_1d_5 FAILED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_minute_30m_5 FAILED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_day_1d_utc PASSED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_minute_1d PASSED [  8%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_minute_1d_5 PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_minute_30m_5 PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_dump_benchmark_stats PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_benchmark_asset_loaded_when_benchmark_asset_not_in_strategy PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_benchmark_asset_loaded_when_benchmark_asset_is_crypto PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1m_dump_benchmark_stats PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_oauth_config_backtesting PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_oauth_mixed_config_backtesting PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktesting::test_oauth_fallback_backtesting PASSED [  9%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_daily_bars_stock PASSED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_daily_bars_crypto PASSED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_minute_bars_stock PASSED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_minute_bars_crypto PASSED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_minute_bars_stock FAILED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_minute_bars_stock_remove_incomplete_current_bar FAILED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_minute_bars_crypto FAILED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_daily_bars_stock FAILED [ 10%]
tests/test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_daily_bars_crypto FAILED [ 10%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_last_price_crypto PASSED [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock PASSED [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock FAILED [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock_remove_incomplete_current_bar FAILED [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock_tuple FAILED [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock_split_adjusted PASSED [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_crypto XFAIL [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_crypto_tuple XFAIL [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_crypto_utc XFAIL [ 11%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_minute_bars_stock_regular_hours FAILED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_minute_bars_crypto_utc FAILED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_historical_option_prices PASSED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_quote_stock PASSED   [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_quote_crypto PASSED  [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_quote_when_stock_bid_is_zero PASSED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_quote_when_stock_ask_is_zero PASSED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock_when_bid_is_zero PASSED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock_when_ask_is_zero PASSED [ 12%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock_when_last PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_get_quote_when_stock_bid_and_ask PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_oauth_data_source_initialization PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_oauth_client_initialization PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_api_key_priority_over_oauth PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_oauth_empty_fallback_to_api_key PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_oauth_none_fallback_to_api_key PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_oauth_no_credentials_error PASSED [ 13%]
tests/test_alpaca_data.py::TestAlpacaData::test_oauth_missing_api_secret_error PASSED [ 14%]
tests/test_alpaca_data.py::TestAlpacaData::test_default_delay_value PASSED [ 14%]
tests/test_alpaca_data.py::TestAlpacaData::test_data_source_delay_env_var PASSED [ 14%]
tests/test_alpaca_helpers.py::test_sanitize_base_and_quote_asset PASSED  [ 14%]
tests/test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_multileg_order_class_is_correct PASSED [ 14%]
tests/test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_multileg_order_has_required_fields PASSED [ 14%]
tests/test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_side_mapping_for_multileg_orders PASSED [ 14%]
tests/test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_multileg_order_with_limit_price PASSED [ 14%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_broker_initialization PASSED [ 14%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_client_creation PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_data_source_initialization PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_stream_object PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_mixed_credentials_broker PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_mixed_credentials_data_source PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_no_credentials_error PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_broker_initialization PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_client_creation PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_constants PASSED [ 15%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_data_source_initialization PASSED [ 16%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_error_handling_stops_execution PASSED [ 16%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_only_stream_object PASSED [ 16%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_polling_interval_custom PASSED [ 16%]
tests/test_alpaca_oauth.py::TestAlpacaOAuth::test_strategy_none_handling PASSED [ 16%]
tests/test_apscheduler_warnings.py::test_sleeptime_10s_max_instances PASSED [ 16%]
tests/test_apscheduler_warnings.py::test_sleeptime_1m_default_max_instances PASSED [ 16%]
tests/test_apscheduler_warnings.py::test_calculate_max_instances_for_sleeptime PASSED [ 16%]
tests/test_asset.py::test_check_default_asset_name PASSED                [ 16%]
tests/test_asset.py::test_check_default_asset_type PASSED                [ 17%]
tests/test_asset.py::test_check_defaults_with_stock PASSED               [ 17%]
tests/test_asset.py::test_is_hashable PASSED                             [ 17%]
tests/test_asset.py::test_extra_attributes_at_initialization PASSED      [ 17%]
tests/test_asset.py::test_instances_equal PASSED                         [ 17%]
tests/test_asset.py::test_symbol2asset PASSED                            [ 17%]
tests/test_asset.py::test_right_validator[not_call_or_CALL] PASSED       [ 17%]
tests/test_asset.py::test_right_validator[not_put_or_PUT] PASSED         [ 17%]
tests/test_asset.py::test_right_validator[CALLS] PASSED                  [ 18%]
tests/test_asset.py::test_right_validator[PUTS] PASSED                   [ 18%]
tests/test_asset.py::test_asset_types_validator[bonds] PASSED            [ 18%]
tests/test_asset.py::test_asset_types_validator[cash] PASSED             [ 18%]
tests/test_asset.py::test_asset_types_validator[swaptions] PASSED        [ 18%]
tests/test_asset.py::test_continuous_futures_asset_creation PASSED       [ 18%]
tests/test_asset.py::test_resolve_continuous_futures_contract PASSED     [ 18%]
tests/test_asset.py::test_get_potential_futures_contracts PASSED         [ 18%]
tests/test_asset.py::test_futures_contract_resolution_monthly_cycles PASSED [ 18%]
tests/test_asset.py::test_different_futures_symbols PASSED               [ 19%]
tests/test_asset.py::test_continuous_futures_equality PASSED             [ 19%]
tests/test_asset.py::test_continuous_futures_inequality PASSED           [ 19%]
tests/test_asset.py::test_futures_contract_with_year_rollover PASSED     [ 19%]
tests/test_asset.py::test_asset_type_enum_values PASSED                  [ 19%]
tests/test_asset.py::test_continuous_futures_string_representation PASSED [ 19%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_front_month PASSED [ 19%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_next_quarter PASSED [ 19%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_true PASSED [ 19%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_auto PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_manual_expiration_overrides_auto_expiry PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_auto_expiry_only_applies_to_futures PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_march PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_after_expiry PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_january PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_december PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_third_friday_calculation PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_invalid_auto_expiry_defaults_to_front_month PASSED [ 20%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_with_datetime_expiration_conversion PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_string_representation_with_auto_expiry PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_equality_with_auto_expiry PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_next_quarter_same_as_front_month PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_continuous_futures_creation PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiry::test_continuous_futures_vs_auto_expiry PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiryIntegration::test_auto_expiry_with_symbol_parsing PASSED [ 21%]
tests/test_asset_auto_expiry.py::TestAssetAutoExpiryIntegration::test_auto_expiry_with_multiplier PASSED [ 21%]