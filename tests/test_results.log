============================= test session starts ==============================
platform darwin -- Python 3.12.10, pytest-8.4.1, pluggy-1.6.0 -- /opt/homebrew/opt/python@3.12/bin/python3.12
cachedir: .pytest_cache
rootdir: /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot
configfile: setup.cfg
plugins: asyncio-1.1.0, xdist-3.8.0, postmarker-1.0, timeout-2.4.0, anyio-4.10.0, cov-6.2.1, langsmith-0.4.13, mock-3.14.0, forked-1.6.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1038 items / 3 skipped

backtest/test_accuracy_verification.py::TestAccuracyVerification::test_one_year_amzn_accuracy PASSED [  0%]
backtest/test_accuracy_verification.py::TestAccuracyVerification::test_multi_symbol_price_ranges PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_process_pending_orders_equity_appies_fee_once PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_process_pending_orders_crypto_keeps_cash_consistent PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_bracket_order_entry_and_exit_cash_consistency PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[market_buy] PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[limit_between_range] PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[limit_gap_down] PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[stop_gap_up] PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[stop_limit_trigger] PASSED [  0%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[market_fractional] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_buy_orders_fill_at_expected_prices[stop_fractional] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_limit_order_remains_open_when_price_not_reached PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_sell_orders_fill_at_expected_prices[market_sell] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_sell_orders_fill_at_expected_prices[limit_sell] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_sell_orders_fill_at_expected_prices[stop_sell] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_sell_orders_fill_at_expected_prices[stop_limit_sell] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_sell_orders_fill_at_expected_prices[limit_fractional] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_sell_orders_fill_at_expected_prices[stop_fractional] PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_trailing_stop_sell_triggers_after_price_drop PASSED [  1%]
backtest/test_backtesting_broker_processing.py::test_bracket_order_stop_exit_executes PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_bracket_order_trailing_exit_executes PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_crypto_market_sell_returns_quote_balance PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_crypto_limit_order_not_filled_when_price_not_hit PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_forex_market_buy_updates_positions PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_percent_fee_is_applied_once PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_flat_fee_is_applied_once PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_multiple_orders_in_single_cycle_all_fill PASSED [  2%]
backtest/test_backtesting_broker_processing.py::test_missing_bar_falls_back_to_last_available_price PASSED [  2%]
backtest/test_crypto_cash_regressions.py::test_crypto_cash_regression_no_fees[price_map0] PASSED [  2%]
backtest/test_crypto_cash_regressions.py::test_crypto_cash_regression_no_fees[price_map1] PASSED [  2%]
backtest/test_crypto_cash_regressions.py::test_crypto_cash_regression_with_fees PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_pltr PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_spy PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_aapl PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_amzn PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_spx_index PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_vix_index PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_full_month_ndx_index PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_spy_call_option PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestDailyDataTimestampComparison::test_daily_data_spy_put_option PASSED [  3%]
backtest/test_daily_data_timestamp_comparison.py::TestIntradayDataComparison::test_theta_vs_polygon_intervals[5minute-5min-78] PASSED [  4%]
backtest/test_daily_data_timestamp_comparison.py::TestIntradayDataComparison::test_theta_vs_polygon_intervals[10minute-10min-39] PASSED [  4%]
backtest/test_daily_data_timestamp_comparison.py::TestIntradayDataComparison::test_theta_vs_polygon_intervals[15minute-15min-26] PASSED [  4%]
backtest/test_daily_data_timestamp_comparison.py::TestIntradayDataComparison::test_theta_vs_polygon_intervals[30minute-30min-13] PASSED [  4%]
backtest/test_daily_data_timestamp_comparison.py::TestIntradayDataComparison::test_theta_vs_polygon_intervals[hour-1h-7] PASSED [  4%]
backtest/test_databento.py::TestDatabentoBacktestFull::test_databento_continuous_futures_minute_data PASSED [  4%]
backtest/test_databento.py::TestDatabentoBacktestFull::test_databento_continuous_futures_minute_data_polars PASSED [  4%]
backtest/test_databento.py::TestDatabentoBacktestFull::test_databento_daily_continuous_futures PASSED [  4%]
backtest/test_databento_comprehensive_trading.py::TestDatabentoComprehensiveTrading::test_multiple_instruments_minute_data PASSED [  4%]
backtest/test_databento_comprehensive_trading.py::TestDatabentoComprehensiveTradingDaily::test_multiple_instruments_daily_data PASSED [  4%]
backtest/test_databento_comprehensive_trading.py::TestDatabentoComprehensiveTradingDaily::test_multiple_instruments_pandas_version PASSED [  5%]
backtest/test_debug_avg_fill_price.py::test_debug_avg_fill_price PASSED  [  5%]
backtest/test_dividends.py::TestDividends::test_yahoo_finance_dividends PASSED [  5%]
backtest/test_dividends.py::TestDividends::test_polygon_dividends PASSED [  5%]
backtest/test_dividends.py::TestDividends::test_compare_yahoo_vs_polygon_dividends PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_stock_bracket PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_stock_oco PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_stock_buy_and_hold PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_stock_diversified_leverage PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_limit_and_trailing_stops PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_options_hold_to_expiry PASSED [  5%]
backtest/test_example_strategies.py::TestExampleStrategies::test_ccxt_backtesting SKIPPED [  6%]
backtest/test_failing_backtest.py::TestFailingBacktest::test_initialize_failure_raises_exception PASSED [  6%]
backtest/test_failing_backtest.py::TestFailingBacktest::test_trading_iteration_failure_raises_exception PASSED [  6%]
backtest/test_failing_backtest.py::TestFailingBacktest::test_backtest_classmethod_initialize_failure PASSED [  6%]
backtest/test_failing_backtest.py::TestFailingBacktest::test_backtest_classmethod_trading_iteration_failure PASSED [  6%]
backtest/test_futures_edge_cases.py::TestFuturesEdgeCases::test_short_selling PASSED [  6%]
backtest/test_futures_edge_cases.py::TestFuturesEdgeCases::test_multiple_simultaneous_positions PASSED [  6%]
backtest/test_futures_single_trade.py::TestFuturesSingleTrade::test_single_mes_trade_tracking PASSED [  6%]
backtest/test_futures_ultra_simple.py::test_ultra_simple_buy_hold_sell PASSED [  6%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_spx_data_accessible PASSED [  6%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_vix_data_accessible PASSED [  7%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_index_timestamp_accuracy PASSED [  7%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_spx_vs_polygon_comparison PASSED [  7%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_vix_vs_polygon_comparison PASSED [  7%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_index_ohlc_consistency PASSED [  7%]
backtest/test_index_data_verification.py::TestIndexDataVerification::test_index_no_missing_bars PASSED [  7%]
backtest/test_multileg_backtest.py::test_multileg_spread_backtest_cash_and_parent_fill PASSED [  7%]
backtest/test_pandas_backtest.py::TestPandasBacktest::test_pandas_data_fixture PASSED [  7%]
backtest/test_pandas_backtest.py::TestPandasBacktest::test_pandas_datasource_with_daily_data_in_backtest PASSED [  7%]
backtest/test_pandas_backtest.py::test_bracket_orders_apply_entry_and_exit_fees PASSED [  7%]
backtest/test_passing_trader_into_backtest.py::TestPassingTraderIntoBacktest::test_not_passing_trader_class_into_backtest_creates_generic_trader PASSED [  7%]
backtest/test_passing_trader_into_backtest.py::TestPassingTraderIntoBacktest::test_passing_trader_class_into_backtest_creates_trader_class PASSED [  8%]
backtest/test_polygon.py::TestPolygonBacktestFull::test_polygon_restclient PASSED [  8%]
backtest/test_polygon.py::TestPolygonBacktestFull::test_intraday_daterange PASSED [  8%]
backtest/test_polygon.py::TestPolygonBacktestFull::test_polygon_legacy_backtest PASSED [  8%]
backtest/test_polygon.py::TestPolygonBacktestFull::test_polygon_legacy_backtest2 PASSED [  8%]
backtest/test_polygon.py::TestPolygonBacktestFull::test_pull_source_symbol_bars_with_api_call PASSED [  8%]
backtest/test_polygon.py::TestPolygonDataSource::test_get_historical_prices PASSED [  8%]
backtest/test_polygon.py::TestPolygonDataSource::test_get_chains_spy_expected_data PASSED [  8%]
backtest/test_polygon.py::TestPolygonDataSource::test_get_last_price_unchanged PASSED [  8%]
backtest/test_polygon.py::TestPolygonDataSource::test_get_historical_prices_unchanged_for_amzn PASSED [  8%]
backtest/test_thetadata.py::TestThetaDataBacktestFull::test_thetadata_restclient PASSED [  9%]
backtest/test_thetadata.py::TestThetaDataBacktestFull::test_intraday_daterange PASSED [  9%]
backtest/test_thetadata.py::TestThetaDataSource::test_get_historical_prices PASSED [  9%]
backtest/test_thetadata.py::TestThetaDataSource::test_get_chains_spy_expected_data PASSED [  9%]
backtest/test_thetadata.py::TestThetaDataSource::test_get_last_price_unchanged PASSED [  9%]
backtest/test_thetadata.py::TestThetaDataSource::test_get_historical_prices_unchanged_for_amzn PASSED [  9%]
backtest/test_thetadata.py::TestThetaDataSource::test_pull_source_symbol_bars_with_api_call PASSED [  9%]
backtest/test_thetadata_comprehensive.py::TestThetaDataStocks::test_first_10_minutes_timestamps_and_prices PASSED [  9%]
backtest/test_thetadata_comprehensive.py::TestThetaDataStocks::test_noon_period_accuracy PASSED [  9%]
backtest/test_thetadata_comprehensive.py::TestThetaDataStocks::test_multiple_symbols PASSED [  9%]
backtest/test_thetadata_comprehensive.py::TestThetaDataMethods::test_get_quote PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataMethods::test_get_chains PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataOptions::test_atm_call_and_put PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataIndexes::test_spx_pricing PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataExtendedHours::test_premarket_data PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataQuoteContinuity::test_multi_day_option_quote_coverage PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_price_data_regular_vs_extended PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_price_data_multi_chunk_fetch PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_historical_data_option_live PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_historical_data_index_live PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_historical_data_quote_style PASSED [ 10%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_historical_data_no_data_returns_none PASSED [ 11%]
backtest/test_thetadata_comprehensive.py::TestThetaDataHelperLive::test_get_expirations_and_strikes_live PASSED [ 11%]
backtest/test_thetadata_comprehensive.py::TestThetaDataPagination::test_pagination_with_mock PASSED [ 11%]
backtest/test_thetadata_vs_polygon.py::TestThetaDataVsPolygonComparison::test_stock_price_comparison PASSED [ 11%]
backtest/test_thetadata_vs_polygon.py::TestThetaDataVsPolygonComparison::test_option_price_comparison PASSED [ 11%]
backtest/test_thetadata_vs_polygon.py::TestThetaDataVsPolygonComparison::test_index_price_comparison PASSED [ 11%]
backtest/test_thetadata_vs_polygon.py::TestThetaDataVsPolygonComparison::test_fill_price_comparison PASSED [ 11%]
backtest/test_thetadata_vs_polygon.py::TestThetaDataVsPolygonComparison::test_portfolio_value_comparison PASSED [ 11%]
backtest/test_thetadata_vs_polygon.py::TestThetaDataVsPolygonComparison::test_cash_comparison PASSED [ 11%]
backtest/test_yahoo.py::TestYahooBacktestFull::test_yahoo_last_price PASSED [ 11%]
test_alpaca.py::TestAlpacaBroker::test_initialize_broker_legacy PASSED   [ 12%]
test_alpaca.py::TestAlpacaBroker::test_submit_order_calls_conform_order PASSED [ 12%]
test_alpaca.py::TestAlpacaBroker::test_limit_order_conforms_when_limit_price_gte_one_dollar PASSED [ 12%]
test_alpaca.py::TestAlpacaBroker::test_limit_order_conforms_when_limit_price_lte_one_dollar PASSED [ 12%]
test_alpaca.py::TestAlpacaBroker::test_option_get_last_price SKIPPED     [ 12%]
test_alpaca.py::TestAlpacaBroker::test_stock_get_last_price PASSED       [ 12%]
test_alpaca.py::TestAlpacaBroker::test_crypto_get_last_price PASSED      [ 12%]
test_alpaca.py::TestAlpacaBroker::test_get_historical_prices PASSED      [ 12%]
test_alpaca.py::TestAlpacaBroker::test_option_get_historical_prices PASSED [ 12%]
test_alpaca.py::TestAlpacaBroker::test_oauth_broker_initialization PASSED [ 12%]
test_alpaca.py::TestAlpacaBroker::test_oauth_mixed_credentials PASSED    [ 13%]
test_alpaca.py::TestAlpacaBroker::test_oauth_fallback_to_api_keys PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_oauth_error_on_missing_credentials PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_oauth_stream_object_creation PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_oauth_polling_interval PASSED     [ 13%]
test_alpaca.py::TestAlpacaBroker::test_custom_params_extended_hours PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_custom_params_multiple_params PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_custom_params_none PASSED         [ 13%]
test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_none_quantity PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_valid_quantity PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_zero_quantity PASSED [ 13%]
test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_with_avg_fill_price_and_date_created PASSED [ 14%]
test_alpaca.py::TestAlpacaBroker::test_parse_broker_order_without_avg_fill_price_and_date_created PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_auth_failed_flag_not_set_for_network_errors PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_auth_failed_flag_set_for_real_auth_errors PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_reset_auth_failure_method PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_client_initialization_with_network_error PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_client_initialization_with_auth_error PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_get_chains_blocked_after_auth_failure PASSED [ 14%]
test_alpaca_auth_fix.py::TestAlpacaAuthFix::test_different_auth_error_patterns PASSED [ 14%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_create_data_source PASSED [ 14%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_basic_key_generation_crypto PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_basic_key_generation_stock PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_with_auto_adjust PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_empty_market_false_auto_adjust PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_different_timezones PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_refresh_cache PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_no_refresh_cache PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_day_when_all_data_exists PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_day_when_missing_dates PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_day_when_missing_dates_beginning PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_reindex_and_fill_minute_when_missing_dates PASSED [ 15%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_5 PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_minute_1d PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_minute_1d_5 PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_minute_30m_5 PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_day_1d_utc PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_minute_1d PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_minute_1d_5 PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_btc_minute_30m_5 PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_dump_benchmark_stats PASSED [ 16%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_benchmark_asset_loaded_when_benchmark_asset_not_in_strategy PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1d_benchmark_asset_loaded_when_benchmark_asset_is_crypto PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_amzn_day_1m_dump_benchmark_stats PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_oauth_config_backtesting PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_oauth_mixed_config_backtesting PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktesting::test_oauth_fallback_backtesting PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_daily_bars_stock PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_daily_bars_crypto PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_minute_bars_stock PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_last_price_minute_bars_crypto PASSED [ 17%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_minute_bars_stock PASSED [ 18%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_minute_bars_stock_remove_incomplete_current_bar PASSED [ 18%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_minute_bars_crypto PASSED [ 18%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_daily_bars_stock PASSED [ 18%]
test_alpaca_backtesting.py::TestAlpacaBacktestingDataSource::test_get_historical_prices_daily_bars_crypto PASSED [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_last_price_crypto PASSED   [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock PASSED    [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock PASSED [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock_remove_incomplete_current_bar PASSED [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock_tuple PASSED [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_stock_split_adjusted PASSED [ 18%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_crypto XFAIL [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_crypto_tuple XFAIL [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_daily_bars_crypto_utc XPASS [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_minute_bars_stock_regular_hours PASSED [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_prices_minute_bars_crypto_utc PASSED [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_historical_option_prices PASSED [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_quote_stock PASSED         [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_quote_crypto PASSED        [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_quote_when_stock_bid_is_zero PASSED [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_quote_when_stock_ask_is_zero PASSED [ 19%]
test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock_when_bid_is_zero PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock_when_ask_is_zero PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_get_last_price_stock_when_last PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_get_quote_when_stock_bid_and_ask PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_oauth_data_source_initialization PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_oauth_client_initialization PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_api_key_priority_over_oauth PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_oauth_empty_fallback_to_api_key PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_oauth_none_fallback_to_api_key PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_oauth_no_credentials_error PASSED [ 20%]
test_alpaca_data.py::TestAlpacaData::test_oauth_missing_api_secret_error PASSED [ 21%]
test_alpaca_data.py::TestAlpacaData::test_default_delay_value PASSED     [ 21%]
test_alpaca_data.py::TestAlpacaData::test_data_source_delay_env_var PASSED [ 21%]
test_alpaca_helpers.py::test_sanitize_base_and_quote_asset PASSED        [ 21%]
test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_multileg_order_class_is_correct PASSED [ 21%]
test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_multileg_order_has_required_fields PASSED [ 21%]
test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_side_mapping_for_multileg_orders PASSED [ 21%]
test_alpaca_multileg_fix.py::TestAlpacaMultiLegOrders::test_multileg_order_with_limit_price PASSED [ 21%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_broker_initialization PASSED [ 21%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_client_creation PASSED [ 21%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_data_source_initialization PASSED [ 21%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_api_key_stream_object PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_mixed_credentials_broker PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_mixed_credentials_data_source PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_no_credentials_error PASSED  [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_broker_initialization PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_client_creation PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_constants PASSED       [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_data_source_initialization PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_error_handling_stops_execution PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_only_stream_object PASSED [ 22%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_oauth_polling_interval_custom PASSED [ 23%]
test_alpaca_oauth.py::TestAlpacaOAuth::test_strategy_none_handling PASSED [ 23%]
test_apscheduler_warnings.py::test_sleeptime_10s_max_instances PASSED    [ 23%]
test_apscheduler_warnings.py::test_sleeptime_1m_default_max_instances PASSED [ 23%]
test_apscheduler_warnings.py::test_calculate_max_instances_for_sleeptime PASSED [ 23%]
test_asset.py::test_check_default_asset_name PASSED                      [ 23%]
test_asset.py::test_check_default_asset_type PASSED                      [ 23%]
test_asset.py::test_check_defaults_with_stock PASSED                     [ 23%]
test_asset.py::test_is_hashable PASSED                                   [ 23%]
test_asset.py::test_extra_attributes_at_initialization PASSED            [ 23%]
test_asset.py::test_instances_equal PASSED                               [ 23%]
test_asset.py::test_symbol2asset PASSED                                  [ 24%]
test_asset.py::test_right_validator[not_call_or_CALL] PASSED             [ 24%]
test_asset.py::test_right_validator[not_put_or_PUT] PASSED               [ 24%]
test_asset.py::test_right_validator[CALLS] PASSED                        [ 24%]
test_asset.py::test_right_validator[PUTS] PASSED                         [ 24%]
test_asset.py::test_asset_types_validator[bonds] PASSED                  [ 24%]
test_asset.py::test_asset_types_validator[cash] PASSED                   [ 24%]
test_asset.py::test_asset_types_validator[swaptions] PASSED              [ 24%]
test_asset.py::test_continuous_futures_asset_creation PASSED             [ 24%]
test_asset.py::test_resolve_continuous_futures_contract PASSED           [ 24%]
test_asset.py::test_resolve_continuous_futures_contract_year_digits PASSED [ 25%]
test_asset.py::test_resolve_continuous_futures_contract_rolls_mid_month PASSED [ 25%]
test_asset.py::test_get_potential_futures_contracts PASSED               [ 25%]
test_asset.py::test_futures_contract_resolution_monthly_cycles PASSED    [ 25%]
test_asset.py::test_different_futures_symbols PASSED                     [ 25%]
test_asset.py::test_continuous_futures_equality PASSED                   [ 25%]
test_asset.py::test_continuous_futures_inequality PASSED                 [ 25%]
test_asset.py::test_futures_contract_with_year_rollover PASSED           [ 25%]
test_asset.py::test_asset_type_enum_values PASSED                        [ 25%]
test_asset.py::test_continuous_futures_string_representation PASSED      [ 25%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_front_month PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_next_quarter PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_true PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_creation_with_auto_expiry_auto PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_manual_expiration_overrides_auto_expiry PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_auto_expiry_only_applies_to_futures PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_march PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_after_expiry PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_january PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_front_month_calculation_december PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_third_friday_calculation PASSED [ 26%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_invalid_auto_expiry_defaults_to_front_month PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_with_datetime_expiration_conversion PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_string_representation_with_auto_expiry PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_asset_equality_with_auto_expiry PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_next_quarter_same_as_front_month PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_continuous_futures_creation PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiry::test_continuous_futures_vs_auto_expiry PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiryIntegration::test_auto_expiry_with_symbol_parsing PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiryIntegration::test_auto_expiry_with_multiplier PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiryIntegration::test_auto_expiry_preserved_in_asset_attributes PASSED [ 27%]
test_asset_auto_expiry.py::TestAssetAutoExpiryIntegration::test_asset_validation_with_auto_expiry PASSED [ 28%]
test_auto_market_inference.py::test_projectx_sets_us_futures PASSED      [ 28%]
test_auto_market_inference.py::test_tradovate_sets_us_futures PASSED     [ 28%]
test_auto_market_inference.py::test_ccxt_sets_24_7 PASSED                [ 28%]
test_auto_market_inference.py::test_no_change_if_configured PASSED       [ 28%]
test_backtesting_broker.py::TestBacktestingBroker::test_limit_fills PASSED [ 28%]
test_backtesting_broker.py::TestBacktestingBroker::test_stop_fills PASSED [ 28%]
test_backtesting_broker.py::TestBacktestingBroker::test_submit_order_calls_conform_order PASSED [ 28%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_close_during_market_hours_no_buffer PASSED [ 28%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_close_get_time_to_close_returns_none PASSED [ 28%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_close_when_already_past_close_no_buffer PASSED [ 28%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_close_with_buffer PASSED [ 29%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_open_before_market_opens_no_buffer PASSED [ 29%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_open_when_market_already_open PASSED [ 29%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_open_with_buffer PASSED [ 29%]
test_backtesting_broker.py::TestBacktestingBrokerTimeAdvance::test_await_open_with_buffer_making_time_negative PASSED [ 29%]
test_backtesting_broker_await_close.py::TestBacktestingBrokerAwaitClose::test_await_close_during_market_hours_no_buffer PASSED [ 29%]
test_backtesting_broker_await_close.py::TestBacktestingBrokerAwaitClose::test_await_close_get_time_to_close_returns_none PASSED [ 29%]
test_backtesting_broker_await_close.py::TestBacktestingBrokerAwaitClose::test_await_close_when_already_past_close_no_buffer PASSED [ 29%]
test_backtesting_broker_await_close.py::TestBacktestingBrokerAwaitClose::test_await_close_with_buffer PASSED [ 29%]
test_backtesting_broker_await_close.py::TestBacktestingBrokerAwaitClose::test_await_close_with_buffer_making_time_negative PASSED [ 29%]
test_backtesting_broker_time_advance.py::TestBacktestingBrokerTimeAdvance::test_await_close_during_market_hours_no_buffer PASSED [ 30%]
test_backtesting_broker_time_advance.py::TestBacktestingBrokerTimeAdvance::test_await_close_get_time_to_close_returns_none PASSED [ 30%]
test_backtesting_broker_time_advance.py::TestBacktestingBrokerTimeAdvance::test_await_close_when_already_past_close_no_buffer PASSED [ 30%]
test_backtesting_broker_time_advance.py::TestBacktestingBrokerTimeAdvance::test_await_close_with_buffer PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_crypto_forex_buy_updates_cash_once PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_crypto_forex_round_trip_restores_cash_on_sell PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_crypto_crypto_pair_uses_quote_position_not_cash PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_filled_order_payload_contains_quantity_and_trade_cost PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_percent_fee_applied_once_to_cash_and_order PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_multiple_orders_same_cycle_keep_cash_consistent PASSED [ 30%]
test_backtesting_crypto_cash_unit.py::test_option_round_trip_applies_multiplier PASSED [ 31%]
test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive PASSED [ 31%]
test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive PASSED [ 31%]
test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_yahoo PASSED [ 31%]
test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_invalid_data_source_raises_error PASSED [ 31%]
test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_explicit_datasource_overrides_env PASSED [ 31%]
test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set PASSED [ 31%]
test_backtesting_flow_control.py::TestBacktestingFlowControl::test_handles_complex_order_updates PASSED [ 31%]
test_backtesting_flow_control.py::TestBacktestingFlowControl::test_handles_data_gaps PASSED [ 31%]
test_backtesting_flow_control.py::TestBacktestingFlowControl::test_handles_strategy_exception PASSED [ 31%]
test_backtesting_multileg_unit.py::test_multileg_parent_fills_after_all_children_complete PASSED [ 31%]
test_backtesting_multileg_unit.py::test_multileg_parent_waits_if_any_child_pending PASSED [ 32%]
test_backtesting_multileg_unit.py::test_multileg_child_fills_adjust_cash_once_and_parent_is_cash_neutral PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_default_backtesting_quiet_logs_is_true PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_quiet_logs_true_console_only_shows_progress_bar_and_errors PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_quiet_logs_true_file_only_shows_errors PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_quiet_logs_false_shows_all_info_plus PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_live_trading_always_shows_console_messages PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_progress_bar_always_shows_regardless_of_quiet_logs PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_bot_manager_compatibility PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_environment_variable_vs_function_parameter PASSED [ 32%]
test_backtesting_quiet_logs_complete.py::test_error_level_equivalence PASSED [ 33%]
test_bars_aggregate_frequency_normalization.py::test_aggregate_accepts_lowercase_minute_variants PASSED [ 33%]
test_bars_aggregate_frequency_normalization.py::test_aggregate_rejects_unsupported_frequency PASSED [ 33%]
test_bars_aggregation_timeunits.py::test_aggregate_bars_epoch_int_timestamp_minutes_failure_current PASSED [ 33%]
test_bars_aggregation_timeunits.py::test_aggregate_bars_alias_variants_minutes PASSED [ 33%]
test_bars_frequency_flex.py::test_arbitrary_minute_frequency PASSED      [ 33%]
test_bars_frequency_flex.py::test_hour_and_second_frequencies PASSED     [ 33%]
test_bars_frequency_flex.py::test_invalid_frequency_raises PASSED        [ 33%]
test_bars_frequency_flex.py::test_bars_datetime_index_normalized_to_default_timezone PASSED [ 33%]
test_botspot_handler.py::test_botspot_handler_dedup_and_aggregation PASSED [ 33%]
test_botspot_handler.py::test_botspot_handler_distinct_fingerprints PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_handler_initialization_without_api_key PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_handler_initialization_with_api_key PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_log_level_to_severity_mapping PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_extract_error_info_basic PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_extract_error_info_with_strategy PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_extract_error_info_structured_format PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_extract_error_info_strategy_with_structured_format PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_extract_error_info_strategy_name_in_message PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_extract_error_info_no_double_spacing PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_report_to_botspot_success PASSED [ 34%]
test_botspot_logger.py::TestBotspotErrorHandler::test_emit_without_api_key PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_emit_below_warning_level PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_duplicate_aggregation PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_rate_limit_window PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_max_errors_per_minute PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_rate_limit_counter_reset PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_api_error_uses_logging_not_print PASSED [ 35%]
test_botspot_logger.py::TestBotspotErrorHandler::test_api_exception_uses_logging_not_print PASSED [ 35%]
test_botspot_logger.py::TestBotspotIntegration::test_handler_not_added_without_api_key PASSED [ 35%]
test_botspot_logger.py::TestBotspotIntegration::test_strategy_logger_integration PASSED [ 35%]
test_broker_bitunix.py::TestBitunixBroker::test_get_balances_at_broker PASSED [ 36%]
test_broker_bitunix.py::TestBitunixBroker::test_initialization_missing_keys PASSED [ 36%]
test_broker_bitunix.py::TestBitunixBroker::test_initialization_success PASSED [ 36%]
test_broker_bitunix.py::TestBitunixBroker::test_map_status_from_bitunix PASSED [ 36%]
test_broker_bitunix.py::TestBitunixBroker::test_parse_broker_order PASSED [ 36%]
test_broker_bitunix.py::TestBitunixBroker::test_parse_source_timestep PASSED [ 36%]
test_broker_bitunix.py::TestBitunixBroker::test_pull_positions_success PASSED [ 36%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_age_based_retention PASSED [ 36%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_count_based_retention PASSED [ 36%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_disabled PASSED  [ 36%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_preserves_recent_items PASSED [ 36%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_respects_min_keep PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_thread_safety PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_cleanup_with_missing_timestamps PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_custom_cleanup_config_initialization PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_default_cleanup_config_initialization PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_full_cleanup_process PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_manual_force_cleanup PASSED [ 37%]
test_broker_cleanup.py::TestBrokerCleanup::test_periodic_cleanup_trigger PASSED [ 37%]
test_broker_initialization.py::TestBrokerInitializationSimple::test_strategy_with_none_broker_raises_helpful_error PASSED [ 37%]
test_broker_initialization.py::TestBrokerInitializationSimple::test_strategy_with_valid_broker_does_not_raise_broker_error PASSED [ 37%]
test_brokers_handle_crypto.py::TestBrokerHandlesCrypto::test_yahoo_backtesting_with_symbol XPASS [ 38%]
test_brokers_handle_crypto.py::TestBrokerHandlesCrypto::test_polygon_backtesting_with_base_and_quote PASSED [ 38%]
test_brokers_handle_crypto.py::TestBrokerHandlesCrypto::test_alpaca_broker_with_base_and_quote XFAIL [ 38%]
test_brokers_handle_crypto.py::TestBrokerHandlesCrypto::test_ccxt_backtesting_with_base_and_quote SKIPPED [ 38%]
test_cash.py::TestCash::test_backtest_setup_cash_handling PASSED         [ 38%]
test_cash.py::TestCash::test_cash_after_position_creation PASSED         [ 38%]
test_cash.py::TestCash::test_cash_after_trade_simulation PASSED          [ 38%]
test_cash.py::TestCash::test_cash_consistency_during_backtest_lifecycle PASSED [ 38%]
test_cash.py::TestCash::test_cash_division_operation PASSED              [ 38%]
test_cash.py::TestCash::test_cash_multiple_position_updates PASSED       [ 38%]
test_cash.py::TestCash::test_cash_property_and_method_consistency PASSED [ 39%]
test_cash.py::TestCash::test_cash_property_never_none PASSED             [ 39%]
test_cash.py::TestCash::test_cash_with_decimal_values PASSED             [ 39%]
test_cash.py::TestCash::test_cash_with_property_and_method_interleaved PASSED [ 39%]
test_cash.py::TestCash::test_cash_with_zero_value PASSED                 [ 39%]
test_cash.py::TestCash::test_division_with_different_prices PASSED       [ 39%]
test_cash.py::TestCash::test_get_cash_method_never_none PASSED           [ 39%]
test_cash.py::TestCash::test_initial_cash_equals_budget PASSED           [ 39%]
test_cash.py::TestCash::test_multiple_get_cash_calls PASSED              [ 39%]
test_cash.py::TestCash::test_no_private_cash_variable PASSED             [ 39%]
test_cash.py::TestCash::test_strategy_mathematical_operations PASSED     [ 39%]
test_cash.py::TestCashWithDifferentBudgets::test_various_budget_amounts PASSED [ 40%]
test_ccxt.py::test_initialize_ccxt_broker_legacy PASSED                  [ 40%]
test_ccxt_store.py::test_cache_download_data[bitmex-ETH/USDT-1d-start0-end0] SKIPPED [ 40%]
test_ccxt_store.py::test_cache_download_data_without_overap[bitmex-ETH/USDT-1d-start0-end0] SKIPPED [ 40%]
test_configs_helper.py::TestConfigsHelper::test_get_classic_60_40_config PASSED [ 40%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_parse_contract_symbol_tradovate_style PASSED [ 40%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_parse_contract_symbol_standard_style PASSED [ 40%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_parse_contract_symbol_dot_notation PASSED [ 40%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_parse_contract_symbol_full_year PASSED [ 40%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_parse_contract_symbol_invalid PASSED [ 40%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_symbol_matches_root PASSED [ 41%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_from_ib_expiration_to_code PASSED [ 41%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_generate_symbol_variants PASSED [ 41%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_get_contract_priority_key PASSED [ 41%]
test_continuous_futures.py::TestFuturesSymbolsUtilities::test_build_ib_contract_variants PASSED [ 41%]
test_continuous_futures.py::TestAssetPotentialContracts::test_includes_single_digit_variants PASSED [ 41%]
test_continuous_futures.py::TestAssetPotentialContracts::test_preserves_existing_order PASSED [ 41%]
test_continuous_futures.py::TestAssetPotentialContracts::test_quarterly_contracts_prioritized PASSED [ 41%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_non_continuous_future_unchanged PASSED [ 41%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_exact_match PASSED [ 41%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_single_contract_match PASSED [ 42%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_multiple_contracts_priority PASSED [ 42%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_ib_style_positions PASSED [ 42%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_no_matches PASSED [ 42%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_ignores_non_futures PASSED [ 42%]
test_continuous_futures.py::TestContinuousFuturesPositionMatching::test_continuous_future_empty_positions PASSED [ 42%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_asset_class_consistency PASSED [ 42%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_centralization_verification PASSED [ 42%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_contract_format_standardization PASSED [ 42%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_databento_integration_consistency PASSED [ 42%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_error_handling_consistency PASSED [ 42%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_multi_component_consistency PASSED [ 43%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_no_duplicate_logic_verification PASSED [ 43%]
test_continuous_futures_integration.py::TestContinuousFuturesIntegration::test_quarterly_preference_consistency PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_contract_format_validation PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_contract_ordering_priority PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_different_symbol_formats PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_error_handling_non_continuous_futures PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_expiration_edge_cases PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_format_continuous_futures_symbol PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_format_specific_futures_symbol PASSED [ 43%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_generate_current_futures_contract_july PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_generate_potential_contracts_july PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_integration_with_databento_helper PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_month_code_mapping PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_month_progression_logic PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_potential_contracts_uniqueness PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_quarterly_contract_consistency PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_quarterly_contract_preference PASSED [ 44%]
test_continuous_futures_resolution.py::TestContinuousFuturesResolution::test_year_rollover_edge_cases PASSED [ 44%]
test_data_source.py::TestDataSource::test_get_chain_full_info PASSED     [ 44%]
test_databento_asset_validation.py::TestDataBentoAssetValidation::test_live_data_source_futures_allowed PASSED [ 44%]
test_databento_asset_validation.py::TestDataBentoAssetValidation::test_live_data_source_equities_rejected PASSED [ 45%]
test_databento_asset_validation.py::TestDataBentoAssetValidation::test_helper_function_allows_all_assets PASSED [ 45%]
test_databento_asset_validation.py::TestDataBentoAssetValidation::test_backtesting_allows_all_assets PASSED [ 45%]
test_databento_asset_validation.py::TestDataBentoAssetValidation::test_benchmark_asset_in_backtesting_only PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_databento_symbol_formatting_with_auto_expiry PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_databento_symbol_with_different_auto_expiry_types PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_databento_symbol_consistency_across_dates PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_databento_symbol_with_manual_vs_auto_expiry PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_databento_symbol_handles_stock_asset PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_databento_symbol_changes_with_date PASSED [ 45%]
test_databento_auto_expiry_integration.py::TestDataBentoAutoExpiryIntegration::test_multiple_futures_with_auto_expiry PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoBacktestingAutoExpiry::test_asset_auto_expiry_in_strategy_context PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoBacktestingAutoExpiry::test_asset_auto_expiry_serialization PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoBacktestingAutoExpiry::test_asset_expiry_stability_during_backtest PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoBacktestingAutoExpiry::test_asset_auto_expiry_edge_cases PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoBacktestingAutoExpiry::test_asset_auto_expiry_with_existing_strategy_pattern PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoHelperMethods::test_format_symbol_with_quarterly_expiry PASSED [ 46%]
test_databento_auto_expiry_integration.py::TestDataBentoHelperMethods::test_format_symbol_consistency PASSED [ 46%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_get_bars_dict_no_data PASSED [ 46%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_get_bars_dict_success PASSED [ 46%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_get_bars_dict_with_timeshift PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_get_chains PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_get_last_price_from_cached_data PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_get_last_price_no_cached_data PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_initialization_databento_unavailable PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_initialization_success PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_prefetch_data_multiple_assets PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_prefetch_data_single_asset PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_prefetch_handles_no_data PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_prefetch_skips_duplicate_requests PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_update_pandas_data_existing_sufficient_data PASSED [ 47%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_update_pandas_data_no_data PASSED [ 48%]
test_databento_backtesting.py::TestDataBentoDataBacktesting::test_update_pandas_data_success PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_backtesting_mode_detection PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_environment_dates_integration PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_error_handling PASSED    [ 48%]
test_databento_data.py::TestDataBentoData::test_get_chains PASSED        [ 48%]
test_databento_data.py::TestDataBentoData::test_get_historical_prices_backtesting_path PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_get_historical_prices_error_handling PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_get_historical_prices_no_data PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_get_historical_prices_single_asset PASSED [ 48%]
test_databento_data.py::TestDataBentoData::test_get_historical_prices_success PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_get_last_price_no_data PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_get_last_price_success PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_initialization_databento_unavailable PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_initialization_default_dates PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_initialization_success PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_mes_strategy_logic_simulation PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_parse_source_bars_empty_data PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_parse_source_bars_missing_columns PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_parse_source_bars_valid_data PASSED [ 49%]
test_databento_data.py::TestDataBentoData::test_timestep_mapping PASSED  [ 50%]
test_databento_data.py::TestDataBentoData::test_timezone_handling PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_build_cache_filename PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_cache_filename_edge_cases PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_cache_loading PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_continuous_futures_integration_edge_cases PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_continuous_futures_resolution PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_databento_client_initialization PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_dataframe_normalization_edge_cases PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_dataset_selection_comprehensive PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_determine_databento_dataset PASSED [ 50%]
test_databento_helper.py::TestDataBentoHelper::test_determine_databento_schema PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_error_handling_api_exception PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_error_handling_empty_dataframe PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_format_futures_symbol_for_databento PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_futures_month_code_consistency PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_get_last_price_from_databento_empty_data PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_get_last_price_from_databento_exception PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_get_last_price_from_databento_no_data PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_get_last_price_from_databento_success PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_get_last_price_resolves_once_no_retry PASSED [ 51%]
test_databento_helper.py::TestDataBentoHelper::test_get_price_data_continuous_futures_resolution PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_get_price_data_databento_unavailable PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_get_price_data_from_databento_success PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_market_calendar_spanning_sessions PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_no_get_potential_futures_contracts_usage PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_no_retry_logic_for_correct_symbol PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_normalize_databento_dataframe PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_schema_mapping_comprehensive PASSED [ 52%]
test_databento_helper.py::TestDataBentoHelper::test_timezone_aware_datetime_usage PASSED [ 52%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_403_forbidden_triggers_retry PASSED [ 52%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_auth_retry_logging PASSED [ 52%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_auth_retry_with_different_error_formats PASSED [ 53%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_authentication_retry_exhausts_after_max_retries PASSED [ 53%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_authentication_retry_on_401_error PASSED [ 53%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_client_property_lazy_initialization PASSED [ 53%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_client_recreation_on_auth_failure PASSED [ 53%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_non_auth_errors_not_retried PASSED [ 53%]
test_databento_helper.py::TestDataBentoAuthenticationRetry::test_successful_retry_after_token_refresh PASSED [ 53%]
test_databento_live.py::test_symbol_resolution PASSED                    [ 53%]
test_databento_live.py::test_live_api_connection PASSED                  [ 53%]
test_databento_live.py::test_minute_bar_aggregation PASSED               [ 53%]
test_databento_live.py::test_api_routing PASSED                          [ 54%]
test_databento_live.py::test_long_time_periods PASSED                    [ 54%]
test_databento_live.py::test_continuous_latency_monitoring PASSED        [ 54%]
test_databento_timezone_fixes.py::TestErrorLoggerFixes::test_error_logger_initialization PASSED [ 54%]
test_databento_timezone_fixes.py::TestErrorLoggerFixes::test_error_logger_log_error_with_all_args PASSED [ 54%]
test_databento_timezone_fixes.py::TestErrorLoggerFixes::test_error_logger_log_error_with_minimal_args PASSED [ 54%]
test_databento_timezone_fixes.py::TestErrorLoggerFixes::test_error_logger_log_error_critical_levels PASSED [ 54%]
test_databento_timezone_fixes.py::TestTimezoneHandling::test_timezone_naive_datetime_operations PASSED [ 54%]
test_databento_timezone_fixes.py::TestTimezoneHandling::test_pandas_datetime_filtering PASSED [ 54%]
test_databento_timezone_fixes.py::TestTimezoneHandling::test_datetime_timezone_consistency PASSED [ 54%]
test_databento_timezone_fixes.py::TestTimezoneHandling::test_datetime_timezone_consistency_in_databento_context PASSED [ 55%]
test_databento_timezone_fixes.py::TestDataBentoIntegration::test_databento_data_source_initialization PASSED [ 55%]
test_databento_timezone_fixes.py::TestDataBentoIntegration::test_databento_futures_asset_validation PASSED [ 55%]
test_databento_timezone_fixes.py::TestDataBentoIntegration::test_databento_live_trading_mode PASSED [ 55%]
test_databento_timezone_fixes.py::TestDataBentoIntegration::test_databento_supported_asset_types PASSED [ 55%]
test_databento_timezone_fixes.py::TestDataBentoTimezoneFixValidation::test_live_trading_datetime_handling PASSED [ 55%]
test_databento_timezone_fixes.py::TestDataBentoTimezoneFixValidation::test_dataframe_timezone_operations PASSED [ 55%]
test_databento_timezone_fixes.py::test_databento_api_integration[True] PASSED [ 55%]
test_databento_timezone_fixes.py::test_databento_api_integration[False] SKIPPED [ 55%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_add_position PASSED [ 55%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_absolute_drift PASSED [ 55%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_relative_drift PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_drift_is_negative_one_when_we_have_a_position_and_the_target_weights_says_to_not_have_it PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_drift_is_one_when_we_have_none_of_an_asset_and_target_weights_says_we_should_have_some PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_drift_is_negative_one_when_we_have_none_of_an_asset_and_target_weights_says_we_should_short_some PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_drift_is_zero_when_current_weight_and_target_weight_are_zero PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_absolute_drift_when_quote_asset_position_exists PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_relative_drift_when_quote_asset_position_exists PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_absolute_drift_when_quote_asset_in_target_weights PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_drift_when_we_want_short_something PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_shorting_more_when_price_goes_up_short_something PASSED [ 56%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_absolute_drift_when_we_want_a_100_percent_short_position PASSED [ 57%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_absolute_drift_when_we_want_a_100_percent_short_position_and_cash_in_target_weights PASSED [ 57%]
test_drift_rebalancer.py::TestDriftCalculationLogic::test_calculate_relative_drift_when_we_want_a_100_percent_short_position PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_everything_with_limit_orders PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_everything_with_market_orders PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_part_of_a_holding_with_limit_order PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_with_only_rebalance_drifted_assets_when_over_drift_threshold PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_with_only_rebalance_drifted_assets_when_not_over_drift_threshold PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_part_of_a_holding_with_market_order PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_short_doesnt_create_and_order_when_shorting_is_disabled PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_small_short_position_creates_and_order_when_shorting_is_enabled PASSED [ 57%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_small_short_position_doesnt_create_order_when_shorting_is_disabled PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_a_100_percent_short_position_creates_an_order_when_shorting_is_enabled PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_buying_something_when_we_have_enough_money_and_there_is_slippage PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_limit_buy_when_we_dont_have_enough_money_for_everything PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_market_buy_when_we_dont_have_enough_money_for_everything PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_attempting_to_buy_when_we_dont_have_enough_money_for_even_one_share PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_attempting_to_sell_when_the_amount_we_need_to_sell_is_less_than_the_limit_price_should_not_sell PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_calculate_limit_price_when_selling PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_calculate_limit_price_when_buying PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_buying_whole_shares PASSED [ 58%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_buying_fractional_shares PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_everything_with_fractional_limit_orders PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_selling_some_with_fractional_limit_orders PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_buying_with_only_rebalance_drifted_assets_when_over_drift_threshold PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_buying_with_only_rebalance_drifted_assets_when_not_over_drift_threshold PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_calculate_trading_costs_with_percent_fees PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_calculate_trading_costs_with_flat_fees PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_calculate_trading_costs_with_both_fee_types PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_calculate_trading_costs_no_fees PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_adjust_quantity_for_fees_buy_affordable PASSED [ 59%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_adjust_quantity_for_fees_buy_not_affordable PASSED [ 60%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_adjust_quantity_for_fees_sell PASSED [ 60%]
test_drift_rebalancer.py::TestDriftOrderLogic::test_get_current_cash_position PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_even_odd_drift_rebalancer_absolute PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_even_odd_drift_rebalancer_relative PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_classic_60_40 PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_classic_60_40_with_fractional PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_yahoo XFAIL [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_polygon PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_alpaca PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_alpaca_modern_way PASSED [ 60%]
test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_alpaca_with_fees PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancer::test_get_last_price_or_raise_returns_decimal PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancer::test_get_last_price_or_raise_raises_value_error_on_none PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_buying_options_with_correct_quantity_calculation PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_buying_options_respects_cash_constraints PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_selling_options_with_correct_quantity_calculation PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_options_quantity_always_whole_contracts PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_mixed_stocks_and_options_portfolio PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_options_cost_calculation_in_cash_deduction PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_options_limit_price_calculation PASSED [ 61%]
test_drift_rebalancer.py::TestDriftRebalancerOptions::test_options_insufficient_cash_creates_no_order PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_no_position_triggers_buy PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_tradovate_position_detected PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_tradovate_position_sells_after_minute PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_ib_style_position_detected PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_multiple_contracts_logs_warning PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_ignores_other_futures PASSED [ 62%]
test_futures_integration.py::TestFuturesCycleAlgoIntegration::test_ignores_stock_positions PASSED [ 62%]
test_get_historical_prices.py::TestBacktestingDataSources::test_get_first_trading_day_after_long_weekend PASSED [ 62%]
test_get_historical_prices.py::TestBacktestingDataSources::test_pandas_backtesting_data_source_get_historical_prices_daily_bars_dividends_and_adj_returns PASSED [ 62%]
test_get_historical_prices.py::TestBacktestingDataSources::test_polygon_backtesting_data_source_get_historical_prices_daily_bars_for_backtesting_broker PASSED [ 63%]
test_get_historical_prices.py::TestBacktestingDataSources::test_polygon_backtesting_data_source_get_historical_prices_daily_bars_over_long_weekend PASSED [ 63%]
test_get_historical_prices.py::TestBacktestingDataSources::test_yahoo_backtesting_data_source_get_historical_prices_daily_bars_dividends_and_adj_returns XPASS [ 63%]
test_get_historical_prices.py::TestBacktestingDataSources::test_kraken_ccxt_backtesting_data_source_get_historical_prices_daily_bars SKIPPED [ 63%]
test_get_historical_prices.py::TestTimestepParsing::test_parse_timestep_standard_formats PASSED [ 63%]
test_get_historical_prices.py::TestTimestepParsing::test_parse_timestep_multi_minute_formats PASSED [ 63%]
test_get_historical_prices.py::TestTimestepParsing::test_parse_timestep_hour_formats PASSED [ 63%]
test_get_historical_prices.py::TestTimestepParsing::test_parse_timestep_day_week_month_formats PASSED [ 63%]
test_get_historical_prices.py::TestTimestepParsing::test_parse_timestep_case_insensitive PASSED [ 63%]
test_get_historical_prices.py::TestTimestepParsing::test_parse_timestep_invalid_formats PASSED [ 63%]
test_helpers.py::test_has_more_than_n_decimal_places PASSED              [ 63%]
test_helpers.py::test_date_n_bars_from_date_valid_input PASSED           [ 64%]
test_helpers.py::test_date_n_bars_from_date_zero_bars PASSED             [ 64%]
test_helpers.py::test_date_n_trading_days_from_date_with_24_7_market PASSED [ 64%]
test_helpers.py::test_get_trading_days PASSED                            [ 64%]
test_helpers.py::test_get_trading_times_day_nyse PASSED                  [ 64%]
test_helpers.py::test_get_trading_times_minute_nyse PASSED               [ 64%]
test_helpers.py::test_get_trading_times_minute_24_7_utc PASSED           [ 64%]
test_helpers.py::test_get_trading_times_minute_24_7_UTC PASSED           [ 64%]
test_helpers.py::test_get_trading_times_minute PASSED                    [ 64%]
test_helpers.py::test_get_timezone_from_datetime PASSED                  [ 64%]
test_helpers.py::test_get_timezone_from_datetime_types PASSED            [ 65%]
test_helpers.py::test_quantize_to_num_decimals PASSED                    [ 65%]
test_helpers.py::test_is_market_open_during_trading_hours PASSED         [ 65%]
test_helpers.py::test_is_market_open_before_trading_hours PASSED         [ 65%]
test_helpers.py::test_is_market_open_after_trading_hours PASSED          [ 65%]
test_helpers.py::test_is_market_open_weekend PASSED                      [ 65%]
test_helpers.py::test_is_market_open_invalid_market PASSED               [ 65%]
test_indicator_subplots.py::TestIndicators::test_default_lines PASSED    [ 65%]
test_indicator_subplots.py::TestIndicators::test_named_lines PASSED      [ 65%]
test_indicator_subplots.py::test_plot_indicators_handles_nan_marker_size PASSED [ 65%]
test_indicator_subplots.py::TestAddMarkerAndLineGuards::test_add_marker_rejects_nan PASSED [ 65%]
test_indicator_subplots.py::TestAddMarkerAndLineGuards::test_add_marker_defaults_color PASSED [ 66%]
test_indicator_subplots.py::TestAddMarkerAndLineGuards::test_add_marker_accepts_css_color PASSED [ 66%]
test_indicator_subplots.py::TestAddMarkerAndLineGuards::test_add_line_rejects_nan PASSED [ 66%]
test_indicator_subplots.py::TestAddMarkerAndLineGuards::test_add_line_defaults_color PASSED [ 66%]
test_indicator_subplots.py::TestAddMarkerAndLineGuards::test_add_line_defaults_style PASSED [ 66%]
test_integration_tests.py::TestIntegrationTests::test_yahoo XPASS (y...) [ 66%]
test_interactive_brokers.py::test_initialize_interactive_broker_legacy PASSED [ 66%]
test_live_trading_resilience.py::TestLiveTradingResilience::test_live_trading_resilience_is_working PASSED [ 66%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #5
 TestStrategy.on_trading_iteration() completed normally for iteration #5

test_logger_env_vars.py::TestEnvironmentVariableHandling::test_backtesting_quiet_logs_overrides_log_level PASSED [ 66%]
test_logger_env_vars.py::TestEnvironmentVariableHandling::test_env_var_precedence_documentation PASSED [ 66%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #6
 TestStrategy.on_trading_iteration() completed normally for iteration #6

test_logger_env_vars.py::TestEnvironmentVariableHandling::test_memory_usage_is_minimal PASSED [ 67%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #7
 TestStrategy.on_trading_iteration() completed normally for iteration #7

test_logging.py::TestLogging::test_logging PASSED                        [ 67%]
test_logging.py::TestLogging::test_backtest_produces_no_logs_when_quiet_logs_is_true  MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #8
 TestStrategy.on_trading_iteration() completed normally for iteration #8
XFAIL [ 67%]
test_logging.py::TestLogging::test_backtest_produces_logs_when_quiet_logs_is_false XFAIL [ 67%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #9
 TestStrategy.on_trading_iteration() completed normally for iteration #9

test_lumibot_logger.py::test_unified_logger_includes_source_context PASSED [ 67%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #10
 TestStrategy.on_trading_iteration() completed normally for iteration #10

test_lumibot_logger.py::test_unified_logger_info_includes_module_context PASSED [ 67%]
test_lumibot_logger.py::test_file_handler_uses_lumibot_formatter  MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #11
 TestStrategy.on_trading_iteration() completed normally for iteration #11
PASSED  [ 67%]
test_lumibot_logger.py::test_quiet_logs_functionality PASSED             [ 67%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #12
 TestStrategy.on_trading_iteration() completed normally for iteration #12

test_lumibot_logger.py::test_trader_quiet_logs_integration PASSED        [ 67%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #13
 TestStrategy.on_trading_iteration() completed normally for iteration #13

test_market_infinite_loop_bug.py::TestESFuturesHangBug::test_comprehensive_diagnostic_scenarios PASSED [ 67%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #14
 TestStrategy.on_trading_iteration() completed normally for iteration #14

test_market_infinite_loop_bug.py::TestESFuturesHangBug::test_continuous_vs_non_continuous_markets PASSED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #15
 TestStrategy.on_trading_iteration() completed normally for iteration #15

test_market_infinite_loop_bug.py::TestESFuturesHangBug::test_different_market_types PASSED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #16
 TestStrategy.on_trading_iteration() completed normally for iteration #16

test_market_infinite_loop_bug.py::TestESFuturesHangBug::test_different_sleeptime_combinations PASSED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #17
 TestStrategy.on_trading_iteration() completed normally for iteration #17

test_market_infinite_loop_bug.py::TestESFuturesHangBug::test_es_futures_no_infinite_restart PASSED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #18
 TestStrategy.on_trading_iteration() completed normally for iteration #18

test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability SKIPPED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #36
 TestStrategy.on_trading_iteration() completed normally for iteration #36

test_momentum.py::TestMomentum::test_momo_pandas_lookback_2 PASSED       [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #37
 TestStrategy.on_trading_iteration() completed normally for iteration #37

test_momentum.py::TestMomentum::test_momo_pandas_lookback_30 PASSED      [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #38
 TestStrategy.on_trading_iteration() completed normally for iteration #38

test_momentum.py::TestMomentum::test_momo_yahoo_lookback_2 XPASS (ya...) [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #39
 TestStrategy.on_trading_iteration() completed normally for iteration #39

test_momentum.py::TestMomentum::test_momo_yahoo_lookback_30 XFAIL (y...) [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #40
 TestStrategy.on_trading_iteration() completed normally for iteration #40

test_options_helper.py::TestOptionsHelper::test_broker_get_chains_handles_missing_payload PASSED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #41
 TestStrategy.on_trading_iteration() completed normally for iteration #41

test_options_helper.py::TestOptionsHelper::test_chains_backward_compatibility_string_access PASSED [ 68%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #42
 TestStrategy.on_trading_iteration() completed normally for iteration #42

test_options_helper.py::TestOptionsHelper::test_chains_date_helper_methods PASSED [ 69%]
test_options_helper.py::TestOptionsHelper::test_chains_strikes_accepts_both_string_and_date PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #43
 TestStrategy.on_trading_iteration() completed normally for iteration #43

test_options_helper.py::TestOptionsHelper::test_enhanced_logging_format PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #44
 TestStrategy.on_trading_iteration() completed normally for iteration #44

test_options_helper.py::TestOptionsHelper::test_evaluate_option_market_fallback_allowed PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #45
 TestStrategy.on_trading_iteration() completed normally for iteration #45

test_options_helper.py::TestOptionsHelper::test_evaluate_option_market_fallback_blocked PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #46
 TestStrategy.on_trading_iteration() completed normally for iteration #46

test_options_helper.py::TestOptionsHelper::test_evaluate_option_market_with_quotes PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #47
 TestStrategy.on_trading_iteration() completed normally for iteration #47

test_options_helper.py::TestOptionsHelper::test_find_next_valid_option_checks_quote_first PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #48
 TestStrategy.on_trading_iteration() completed normally for iteration #48

test_options_helper.py::TestOptionsHelper::test_find_next_valid_option_falls_back_to_last_price PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #50
 TestStrategy.on_trading_iteration() completed normally for iteration #50

test_options_helper.py::TestOptionsHelper::test_get_expiration_on_or_after_date_returns_future PASSED [ 69%]
test_options_helper.py::TestOptionsHelper::test_get_expiration_on_or_after_date_uses_latest_when_needed PASSED [ 69%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #51
 TestStrategy.on_trading_iteration() completed normally for iteration #51

test_options_helper.py::TestOptionsHelper::test_get_expiration_validates_data_when_underlying_provided PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #52
 TestStrategy.on_trading_iteration() completed normally for iteration #52

test_options_helper.py::TestOptionsHelper::test_invalid_delta PASSED     [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #53
 TestStrategy.on_trading_iteration() completed normally for iteration #53

test_options_helper.py::TestOptionsHelper::test_invalid_underlying_price PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #54
 TestStrategy.on_trading_iteration() completed normally for iteration #54

test_options_helper.py::TestOptionsHelper::test_missing_chains_returns_none PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #55
 TestStrategy.on_trading_iteration() completed normally for iteration #55

test_options_helper.py::TestOptionsHelper::test_normal_strike_calculation PASSED [ 70%]
test_options_helper.py::TestOptionsHelper::test_normalize_option_chains_adds_missing_keys PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #56
 TestStrategy.on_trading_iteration() completed normally for iteration #56

test_options_helper.py::TestOptionsHelper::test_normalize_option_chains_invalid_expiry PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #57
 TestStrategy.on_trading_iteration() completed normally for iteration #57

test_options_helper.py::TestOptionsHelper::test_options_expiry_to_datetime_date_accepts_strings PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #58
 TestStrategy.on_trading_iteration() completed normally for iteration #58

test_options_helper.py::TestOptionsHelper::test_warning_for_unrealistic_strike PASSED [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #59
 TestStrategy.on_trading_iteration() completed normally for iteration #59

test_order.py::TestOrderBasics::test_side_must_be_one_of PASSED          [ 70%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #60
 TestStrategy.on_trading_iteration() completed normally for iteration #60

test_order.py::TestOrderBasics::test_blank_oco PASSED                    [ 71%]
test_order.py::TestOrderBasics::test_price_doesnt_exist PASSED           [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #61
 TestStrategy.on_trading_iteration() completed normally for iteration #61

test_order.py::TestOrderBasics::test_is_option PASSED                    [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #62
 TestStrategy.on_trading_iteration() completed normally for iteration #62

test_order.py::TestOrderBasics::test_get_filled_price PASSED             [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #63
 TestStrategy.on_trading_iteration() completed normally for iteration #63

test_order.py::TestOrderBasics::test_filled PASSED                       [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #64
 TestStrategy.on_trading_iteration() completed normally for iteration #64

test_order.py::TestOrderBasics::test_is_buy_order PASSED                 [ 71%] TestStrategy.on_trading_iteration() called - iteration #65
 TestStrategy.on_trading_iteration() completed normally for iteration #65

test_order.py::TestOrderBasics::test_is_sell_order PASSED                [ 71%]
test_order.py::TestOrderBasics::test_cancelled PASSED                    [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #66
 TestStrategy.on_trading_iteration() completed normally for iteration #66

test_order.py::TestOrderBasics::test_active PASSED                       [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #67
 TestStrategy.on_trading_iteration() completed normally for iteration #67

test_order.py::TestOrderBasics::test_active_oco PASSED                   [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #68
 TestStrategy.on_trading_iteration() completed normally for iteration #68

test_order.py::TestOrderBasics::test_status PASSED                       [ 71%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #69
 TestStrategy.on_trading_iteration() completed normally for iteration #69

test_order.py::TestOrderBasics::test_equivalent_status PASSED            [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #70
 TestStrategy.on_trading_iteration() completed normally for iteration #70

test_order.py::TestOrderBasics::test_to_position PASSED                  [ 72%]
test_order.py::TestOrderAdvanced::test_oco_type_reassigned PASSED        [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #71
 TestStrategy.on_trading_iteration() completed normally for iteration #71

test_order.py::TestOrderAdvanced::test_bracket_standard PASSED           [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #72
 TestStrategy.on_trading_iteration() completed normally for iteration #72

test_order.py::TestOrderAdvanced::test_is_equivalent_status PASSED       [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #73
 TestStrategy.on_trading_iteration() completed normally for iteration #73

test_order_serialization.py::TestOrderSerialization::test_to_dict_excludes_internal_fields PASSED [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #74
 TestStrategy.on_trading_iteration() completed normally for iteration #74

test_order_serialization.py::TestOrderSerialization::test_to_dict_includes_essential_fields PASSED [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #75
 TestStrategy.on_trading_iteration() completed normally for iteration #75

test_order_serialization.py::TestOrderSerialization::test_to_dict_size_reduction PASSED [ 72%]
test_pandas_data.py::TestPandasData::test_pandas_data_fixture PASSED     [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #76
 TestStrategy.on_trading_iteration() completed normally for iteration #76

test_pandas_data.py::TestPandasData::test_spy_has_dividends PASSED       [ 72%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #77
 TestStrategy.on_trading_iteration() completed normally for iteration #77

test_pandas_data.py::TestPandasData::test_get_start_datetime_and_ts_unit PASSED [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #78
 TestStrategy.on_trading_iteration() completed normally for iteration #78

test_pandas_data.py::TestPandasData::test_data_get_quote_handles_missing_bid_ask PASSED [ 73%]
test_polygon_helper.py::TestPolygonHelpers::test_build_cache_filename PASSED [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #80
 TestStrategy.on_trading_iteration() completed normally for iteration #80

test_polygon_helper.py::TestPolygonHelpers::test_missing_dates PASSED    [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #81
 TestStrategy.on_trading_iteration() completed normally for iteration #81

test_polygon_helper.py::TestPolygonHelpers::test_get_trading_dates PASSED [ 73%]
test_polygon_helper.py::TestPolygonHelpers::test_get_polygon_symbol PASSED [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #82
 TestStrategy.on_trading_iteration() completed normally for iteration #82

test_polygon_helper.py::TestPolygonHelpers::test_load_data_from_cache PASSED [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #83
 TestStrategy.on_trading_iteration() completed normally for iteration #83

test_polygon_helper.py::TestPolygonHelpers::test_update_cache PASSED     [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #84
 TestStrategy.on_trading_iteration() completed normally for iteration #84

test_polygon_helper.py::TestPolygonHelpers::test_update_polygon_data PASSED [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #85
 TestStrategy.on_trading_iteration() completed normally for iteration #85

test_polygon_helper.py::TestPolygonPriceData::test_get_price_data_from_polygon PASSED [ 73%]
test_polygon_helper.py::TestPolygonPriceData::test_polygon_missing_day_caching[True-day] PASSED [ 73%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #87
 TestStrategy.on_trading_iteration() completed normally for iteration #87

test_polygon_helper.py::TestPolygonPriceData::test_polygon_missing_day_caching[True-minute] PASSED [ 74%]
test_polygon_helper.py::TestPolygonPriceData::test_polygon_missing_day_caching[False-day] PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #88
 TestStrategy.on_trading_iteration() completed normally for iteration #88

test_polygon_helper.py::TestPolygonPriceData::test_polygon_missing_day_caching[False-minute] PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #89
 TestStrategy.on_trading_iteration() completed normally for iteration #89

test_polygon_helper.py::TestPolygonPriceData::test_get_chains_cached PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #90
 TestStrategy.on_trading_iteration() completed normally for iteration #90

test_position_serialization.py::TestPositionSerialization::test_orders_list_included PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #91
 TestStrategy.on_trading_iteration() completed normally for iteration #91

test_position_serialization.py::TestPositionSerialization::test_to_dict_excludes_internal_fields PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #92
 TestStrategy.on_trading_iteration() completed normally for iteration #92

test_position_serialization.py::TestPositionSerialization::test_to_dict_includes_essential_fields PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #93
 TestStrategy.on_trading_iteration() completed normally for iteration #93

test_position_serialization.py::TestPositionSerialization::test_to_dict_size_reduction PASSED [ 74%]
test_projectx.py::TestProjectXBroker::test_broker_initialization PASSED  [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #94
 TestStrategy.on_trading_iteration() completed normally for iteration #94

test_projectx.py::TestProjectXBroker::test_order_status_mapping_corrected PASSED [ 74%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #95
 TestStrategy.on_trading_iteration() completed normally for iteration #95

test_projectx.py::TestProjectXBroker::test_position_conversion_field_mapping PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #96
 TestStrategy.on_trading_iteration() completed normally for iteration #96

test_projectx.py::TestProjectXBroker::test_position_conversion_field_fallback PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #97
 TestStrategy.on_trading_iteration() completed normally for iteration #97

test_projectx.py::TestProjectXBroker::test_order_conversion_from_broker_format PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #98
 TestStrategy.on_trading_iteration() completed normally for iteration #98

test_projectx.py::TestProjectXBroker::test_order_status_mapping_edge_cases PASSED [ 75%]
test_projectx.py::TestProjectXBroker::test_asset_resolution_no_hardcoded_mappings PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #99
 TestStrategy.on_trading_iteration() completed normally for iteration #99

test_projectx.py::TestProjectXBroker::test_order_tracking_sync_functionality PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #100
 TestStrategy.on_trading_iteration() completed normally for iteration #100

test_projectx.py::TestProjectXBroker::test_order_sync_prevents_auto_cancellation PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #101
 TestStrategy.on_trading_iteration() completed normally for iteration #101

test_projectx.py::TestProjectXBroker::test_get_historical_account_value_not_implemented PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #102
 TestStrategy.on_trading_iteration() completed normally for iteration #102

test_projectx.py::TestProjectXBroker::test_get_option_chains_not_supported PASSED [ 75%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #103
 TestStrategy.on_trading_iteration() completed normally for iteration #103

test_projectx.py::TestProjectXBroker::test_order_type_conversions PASSED [ 75%]
test_projectx.py::TestProjectXBroker::test_contract_id_parsing PASSED    [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #104
 TestStrategy.on_trading_iteration() completed normally for iteration #104

test_projectx.py::TestProjectXBroker::test_logging_cleanup PASSED        [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #105
 TestStrategy.on_trading_iteration() completed normally for iteration #105

test_projectx.py::TestProjectXBroker::test_position_display_format PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #106
 TestStrategy.on_trading_iteration() completed normally for iteration #106

test_projectx.py::TestProjectXBroker::test_multiple_order_status_scenarios PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #107
 TestStrategy.on_trading_iteration() completed normally for iteration #107

test_projectx.py::TestProjectXBrokerIntegration::test_full_order_sync_workflow PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #108
 TestStrategy.on_trading_iteration() completed normally for iteration #108

test_projectx.py::TestProjectXBrokerIntegration::test_position_sync_workflow PASSED [ 76%]
test_projectx_bracket_helpers.py::test_create_bracket_meta_shape PASSED  [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #109
 TestStrategy.on_trading_iteration() completed normally for iteration #109

test_projectx_bracket_helpers.py::test_normalize_bracket_entry_tag[MYTAG-BRK_ENTRY_MYTAG-MYTAG] PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #110
 TestStrategy.on_trading_iteration() completed normally for iteration #110

test_projectx_bracket_helpers.py::test_normalize_bracket_entry_tag[BRK_ENTRY_BASE-BRK_ENTRY_BASE-BASE] PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #111
 TestStrategy.on_trading_iteration() completed normally for iteration #111

test_projectx_bracket_helpers.py::test_normalize_bracket_entry_tag[BRK_TP_BASE-BRK_ENTRY_BASE-BASE] PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #112
 TestStrategy.on_trading_iteration() completed normally for iteration #112

test_projectx_bracket_helpers.py::test_normalize_bracket_entry_tag[BRK_STOP_BASE-BRK_ENTRY_BASE-BASE] PASSED [ 76%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #113
 TestStrategy.on_trading_iteration() completed normally for iteration #113

test_projectx_bracket_helpers.py::test_normalize_bracket_entry_tag[None-None-None] PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #114
 TestStrategy.on_trading_iteration() completed normally for iteration #114

test_projectx_bracket_helpers.py::test_derive_base_tag[BRK_ENTRY_BASE-BASE] PASSED [ 77%]
test_projectx_bracket_helpers.py::test_derive_base_tag[BRK_TP_BASE-BASE] PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #115
 TestStrategy.on_trading_iteration() completed normally for iteration #115

test_projectx_bracket_helpers.py::test_derive_base_tag[BRK_STOP_BASE-BASE] PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #116
 TestStrategy.on_trading_iteration() completed normally for iteration #116

test_projectx_bracket_helpers.py::test_derive_base_tag[PLAIN-PLAIN] PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #117
 TestStrategy.on_trading_iteration() completed normally for iteration #117

test_projectx_bracket_helpers.py::test_derive_base_tag[None-None] PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #118
 TestStrategy.on_trading_iteration() completed normally for iteration #118

test_projectx_bracket_helpers.py::test_bracket_child_tag_variants PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #119
 TestStrategy.on_trading_iteration() completed normally for iteration #119

test_projectx_bracket_helpers.py::test_build_unique_order_tag_generates_and_preserves PASSED [ 77%]
test_projectx_bracket_helpers.py::test_select_effective_prices_precedence_and_rounding PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #120
 TestStrategy.on_trading_iteration() completed normally for iteration #120

test_projectx_bracket_helpers.py::test_early_store_and_restore_bracket_meta PASSED [ 77%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #121
 TestStrategy.on_trading_iteration() completed normally for iteration #121

test_projectx_bracket_helpers.py::test_should_spawn_bracket_children[meta0-False-expected0] PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #122
 TestStrategy.on_trading_iteration() completed normally for iteration #122

test_projectx_bracket_helpers.py::test_should_spawn_bracket_children[meta1-False-expected1] PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #123
 TestStrategy.on_trading_iteration() completed normally for iteration #123

test_projectx_bracket_helpers.py::test_build_bracket_child_spec_shapes PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #124
 TestStrategy.on_trading_iteration() completed normally for iteration #124

test_projectx_bracket_lifecycle_unit.py::test_bracket_parent_submission_stores_meta_and_normalizes_tag PASSED [ 78%]
test_projectx_bracket_lifecycle_unit.py::test_bracket_children_spawn_on_fill_and_tagging PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #125
 TestStrategy.on_trading_iteration() completed normally for iteration #125

test_projectx_bracket_lifecycle_unit.py::test_bracket_child_fill_cancels_sibling PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #126
 TestStrategy.on_trading_iteration() completed normally for iteration #126

test_projectx_data.py::TestProjectXDataSource::test_data_source_initialization PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #127
 TestStrategy.on_trading_iteration() completed normally for iteration #127

test_projectx_data.py::TestProjectXDataSource::test_asset_to_contract_id_no_hardcoded_mappings PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #128
 TestStrategy.on_trading_iteration() completed normally for iteration #128

test_projectx_data.py::TestProjectXDataSource::test_contract_id_generation_dynamic PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #129
 TestStrategy.on_trading_iteration() completed normally for iteration #129

test_projectx_data.py::TestProjectXDataSource::test_timespan_parsing PASSED [ 78%]
test_projectx_data.py::TestProjectXDataSource::test_projectx_unit_mapping PASSED [ 78%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #130
 TestStrategy.on_trading_iteration() completed normally for iteration #130

test_projectx_data.py::TestProjectXDataSource::test_get_historical_prices_bars_conversion PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #131
 TestStrategy.on_trading_iteration() completed normally for iteration #131

test_projectx_data.py::TestProjectXDataSource::test_get_last_price PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #132
 TestStrategy.on_trading_iteration() completed normally for iteration #132

test_projectx_data.py::TestProjectXDataSource::test_dividends_not_supported PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #133
 TestStrategy.on_trading_iteration() completed normally for iteration #133

test_projectx_data.py::TestProjectXDataSource::test_option_chains_not_supported PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #134
 TestStrategy.on_trading_iteration() completed normally for iteration #134

test_projectx_data.py::TestProjectXDataSource::test_get_bars_with_contract_found PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #135
 TestStrategy.on_trading_iteration() completed normally for iteration #135

test_projectx_data.py::TestProjectXDataSource::test_contract_search_multiple_formats PASSED [ 79%]
test_projectx_data.py::TestProjectXDataSource::test_error_handling_no_contracts_found PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #136
 TestStrategy.on_trading_iteration() completed normally for iteration #136

test_projectx_data.py::TestProjectXDataSource::test_get_contract_details PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #137
 TestStrategy.on_trading_iteration() completed normally for iteration #137

test_projectx_data.py::TestProjectXDataSource::test_search_contracts PASSED [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #138
 TestStrategy.on_trading_iteration() completed normally for iteration #138

test_projectx_data.py::TestProjectXDataSource::test_get_quote PASSED     [ 79%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #139
 TestStrategy.on_trading_iteration() completed normally for iteration #139

test_projectx_data.py::TestProjectXDataSource::test_get_bars_from_datetime PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #140
 TestStrategy.on_trading_iteration() completed normally for iteration #140

test_projectx_data.py::TestProjectXDataSourceIntegration::test_full_historical_data_workflow PASSED [ 80%]
test_projectx_data.py::TestProjectXDataSourceIntegration::test_asset_resolution_workflow_with_fallbacks PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #141
 TestStrategy.on_trading_iteration() completed normally for iteration #141

test_projectx_datetime_columns.py::test_projectx_fetch_bars_datetime_debug PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #142
 TestStrategy.on_trading_iteration() completed normally for iteration #142

test_projectx_datetime_index.py::test_projectx_datetime_index PASSED     [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #143
 TestStrategy.on_trading_iteration() completed normally for iteration #143

test_projectx_helpers.py::TestProjectXAuth::test_get_auth_token_success PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #144
 TestStrategy.on_trading_iteration() completed normally for iteration #144

test_projectx_helpers.py::TestProjectXAuth::test_get_auth_token_failure PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #145
 TestStrategy.on_trading_iteration() completed normally for iteration #145

test_projectx_helpers.py::TestProjectXAuth::test_get_auth_token_invalid_json PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #146
 TestStrategy.on_trading_iteration() completed normally for iteration #146

test_projectx_helpers.py::TestProjectXAuth::test_get_auth_token_missing_config PASSED [ 80%]
test_projectx_helpers.py::TestProjectXClient::test_client_initialization PASSED [ 80%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #147
 TestStrategy.on_trading_iteration() completed normally for iteration #147

test_projectx_helpers.py::TestProjectXClient::test_get_accounts PASSED   [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #148
 TestStrategy.on_trading_iteration() completed normally for iteration #148

test_projectx_helpers.py::TestProjectXClient::test_get_preferred_account_id PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #149
 TestStrategy.on_trading_iteration() completed normally for iteration #149

test_projectx_helpers.py::TestProjectXClient::test_get_account_balance PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #150
 TestStrategy.on_trading_iteration() completed normally for iteration #150

test_projectx_helpers.py::TestProjectXClient::test_get_positions PASSED  [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #151
 TestStrategy.on_trading_iteration() completed normally for iteration #151

test_projectx_helpers.py::TestProjectXClient::test_get_orders PASSED     [ 81%]
test_projectx_helpers.py::TestProjectXClient::test_place_order_success PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #152
 TestStrategy.on_trading_iteration() completed normally for iteration #152

test_projectx_helpers.py::TestProjectXClient::test_cancel_order_success PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #153
 TestStrategy.on_trading_iteration() completed normally for iteration #153

test_projectx_helpers.py::TestProjectXClient::test_get_historical_data PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #154
 TestStrategy.on_trading_iteration() completed normally for iteration #154

test_projectx_helpers.py::TestProjectXClient::test_search_contracts PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #155
 TestStrategy.on_trading_iteration() completed normally for iteration #155

test_projectx_helpers.py::TestProjectXClient::test_get_contract_details PASSED [ 81%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #156
 TestStrategy.on_trading_iteration() completed normally for iteration #156

test_projectx_helpers.py::TestProjectXClient::test_find_contract_by_symbol PASSED [ 81%]
test_projectx_helpers.py::TestProjectXClient::test_contract_id_conversion_no_hardcoded_mappings PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #157
 TestStrategy.on_trading_iteration() completed normally for iteration #157

test_projectx_helpers.py::TestProjectXClient::test_get_contract_tick_size PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #158
 TestStrategy.on_trading_iteration() completed normally for iteration #158

test_projectx_helpers.py::TestProjectXClient::test_round_to_tick_size PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #159
 TestStrategy.on_trading_iteration() completed normally for iteration #159

test_projectx_helpers.py::TestProjectXApiClient::test_api_client_initialization PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #160
 TestStrategy.on_trading_iteration() completed normally for iteration #160

test_projectx_helpers.py::TestProjectXApiClient::test_api_request_headers PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #161
 TestStrategy.on_trading_iteration() completed normally for iteration #161

test_projectx_helpers.py::TestProjectXApiClient::test_account_search PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #162
 TestStrategy.on_trading_iteration() completed normally for iteration #162

test_projectx_helpers.py::TestProjectXApiClient::test_position_search_open PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #163
 TestStrategy.on_trading_iteration() completed normally for iteration #163

test_projectx_helpers.py::TestProjectXApiClient::test_order_search PASSED [ 82%]
test_projectx_helpers.py::TestProjectXApiClient::test_order_place PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #164
 TestStrategy.on_trading_iteration() completed normally for iteration #164

test_projectx_helpers.py::TestProjectXApiClient::test_order_cancel PASSED [ 82%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #165
 TestStrategy.on_trading_iteration() completed normally for iteration #165

test_projectx_helpers.py::TestProjectXApiClient::test_contract_search PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #166
 TestStrategy.on_trading_iteration() completed normally for iteration #166

test_projectx_helpers.py::TestProjectXApiClient::test_contract_search_id PASSED [ 83%] TestStrategy.on_trading_iteration() called - iteration #167
 TestStrategy.on_trading_iteration() completed normally for iteration #167

test_projectx_helpers.py::TestProjectXApiClient::test_history_retrieve_bars PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #168
 TestStrategy.on_trading_iteration() completed normally for iteration #168

test_projectx_helpers.py::TestProjectXApiClient::test_get_streaming_client PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #169
 TestStrategy.on_trading_iteration() completed normally for iteration #169

test_projectx_helpers.py::TestProjectXErrorHandling::test_authentication_retry_logic PASSED [ 83%]
test_projectx_helpers.py::TestProjectXErrorHandling::test_api_rate_limiting_handling PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #170
 TestStrategy.on_trading_iteration() completed normally for iteration #170

test_projectx_helpers.py::TestProjectXErrorHandling::test_network_error_handling PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #171
 TestStrategy.on_trading_iteration() completed normally for iteration #171

test_projectx_helpers.py::TestProjectXErrorHandling::test_invalid_response_handling PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #172
 TestStrategy.on_trading_iteration() completed normally for iteration #172

test_projectx_helpers.py::TestProjectXErrorHandling::test_http_error_codes PASSED [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #173
 TestStrategy.on_trading_iteration() completed normally for iteration #173

test_projectx_lifecycle.py::test_projectx_initialization PASSED          [ 83%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #174
 TestStrategy.on_trading_iteration() completed normally for iteration #174

test_projectx_lifecycle.py::test_projectx_has_client PASSED              [ 84%]
test_projectx_lifecycle_unit.py::test_submit_and_cancel  MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #175
 TestStrategy.on_trading_iteration() completed normally for iteration #175
PASSED           [ 84%]
test_projectx_lifecycle_unit.py::test_rejection_mapping_max_position PASSED [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #176
 TestStrategy.on_trading_iteration() completed normally for iteration #176

test_projectx_lifecycle_unit.py::test_rejection_generic PASSED           [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #177
 TestStrategy.on_trading_iteration() completed normally for iteration #177

test_projectx_lifecycle_unit.py::test_new_order_event_dispatched_on_submit PASSED [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #178
 TestStrategy.on_trading_iteration() completed normally for iteration #178

test_projectx_lifecycle_unit.py::test_order_status_change_detection PASSED [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #179
 TestStrategy.on_trading_iteration() completed normally for iteration #179

test_projectx_lifecycle_unit.py::test_order_cancellation_event PASSED    [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #180
 TestStrategy.on_trading_iteration() completed normally for iteration #180

test_projectx_lifecycle_unit.py::test_partial_fill_event PASSED          [ 84%]
test_projectx_lifecycle_unit.py::test_streaming_order_update_triggers_events PASSED [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #181
 TestStrategy.on_trading_iteration() completed normally for iteration #181

test_projectx_lifecycle_unit.py::test_streaming_trade_update_triggers_fill PASSED [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #182
 TestStrategy.on_trading_iteration() completed normally for iteration #182

test_projectx_lifecycle_unit.py::test_pre_existing_filled_order_handling PASSED [ 84%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #183
 TestStrategy.on_trading_iteration() completed normally for iteration #183

test_projectx_lifecycle_unit.py::test_error_order_event PASSED           [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #184
 TestStrategy.on_trading_iteration() completed normally for iteration #184

test_projectx_lifecycle_unit.py::test_order_identifier_sync PASSED       [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #185
 TestStrategy.on_trading_iteration() completed normally for iteration #185

test_projectx_lifecycle_unit.py::test_order_tracking_with_multiple_orders PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #186
 TestStrategy.on_trading_iteration() completed normally for iteration #186

test_projectx_timestep_alias.py::test_projectx_get_bars_accepts_timestep_alias PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #187
 TestStrategy.on_trading_iteration() completed normally for iteration #187

test_projectx_url_mappings.py::TestProjectXURLMappings::test_url_mappings_loaded PASSED [ 85%]
test_projectx_url_mappings.py::TestProjectXURLMappings::test_url_patterns PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #188
 TestStrategy.on_trading_iteration() completed normally for iteration #188

test_projectx_url_mappings.py::TestProjectXURLMappings::test_get_config_with_builtin_urls PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #189
 TestStrategy.on_trading_iteration() completed normally for iteration #189

test_projectx_url_mappings.py::TestProjectXURLMappings::test_get_config_with_env_override PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #190
 TestStrategy.on_trading_iteration() completed normally for iteration #190

test_projectx_url_mappings.py::TestProjectXURLMappings::test_get_config_partial_env_override PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #191
 TestStrategy.on_trading_iteration() completed normally for iteration #191

test_projectx_url_mappings.py::TestProjectXURLMappings::test_get_config_topstepx_special_case PASSED [ 85%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #192
 TestStrategy.on_trading_iteration() completed normally for iteration #192

test_projectx_url_mappings.py::TestProjectXURLMappings::test_get_config_unknown_firm PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #193
 TestStrategy.on_trading_iteration() completed normally for iteration #193

test_projectx_url_mappings.py::TestProjectXURLMappings::test_auto_detection_with_multiple_firms PASSED [ 86%]
test_projectx_url_mappings.py::TestProjectXBrokerValidation::test_broker_validation_success PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #194
 TestStrategy.on_trading_iteration() completed normally for iteration #194

test_projectx_url_mappings.py::TestProjectXBrokerValidation::test_broker_validation_missing_fields PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #195
 TestStrategy.on_trading_iteration() completed normally for iteration #195

test_projectx_url_mappings.py::TestProjectXBrokerValidation::test_short_firm_name_env_vars_only PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #196
 TestStrategy.on_trading_iteration() completed normally for iteration #196

test_projectx_url_mappings.py::TestProjectXBrokerValidation::test_no_legacy_firm_names_in_mappings PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #197
 TestStrategy.on_trading_iteration() completed normally for iteration #197

test_quiet_logs_buy_and_hold.py::test_quiet_logs_buy_and_hold_integration PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #198
 TestStrategy.on_trading_iteration() completed normally for iteration #198

test_quiet_logs_comprehensive.py::test_print_progress_bar_respects_quiet_logs PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #199
 TestStrategy.on_trading_iteration() completed normally for iteration #199

test_quiet_logs_comprehensive.py::test_data_source_backtesting_respects_quiet_logs PASSED [ 86%]
test_quiet_logs_comprehensive.py::test_strategy_logger_respects_quiet_logs PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #200
 TestStrategy.on_trading_iteration() completed normally for iteration #200

test_quiet_logs_comprehensive.py::test_environment_variable_variations PASSED [ 86%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #201
 TestStrategy.on_trading_iteration() completed normally for iteration #201

test_quiet_logs_functionality.py::test_progress_bar_always_shows_with_quiet_logs PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #202
 TestStrategy.on_trading_iteration() completed normally for iteration #202

test_quiet_logs_functionality.py::test_strategy_logger_respects_quiet_logs PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #203
 TestStrategy.on_trading_iteration() completed normally for iteration #203

test_quiet_logs_functionality.py::test_quiet_logs_environment_variable PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #204
 TestStrategy.on_trading_iteration() completed normally for iteration #204

test_quiet_logs_functionality.py::test_progress_bar_shows_green_bar PASSED [ 87%]
test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_requirement_1_console_always_error_during_backtest_quiet_true PASSED [ 87%] TestStrategy.on_trading_iteration() called - iteration #205
 TestStrategy.on_trading_iteration() completed normally for iteration #205

test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_requirement_1_console_always_error_during_backtest_quiet_false PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #206
 TestStrategy.on_trading_iteration() completed normally for iteration #206

test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_requirement_2_file_logging_quiet_true PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #207
 TestStrategy.on_trading_iteration() completed normally for iteration #207

test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_requirement_2_file_logging_quiet_false PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #208
 TestStrategy.on_trading_iteration() completed normally for iteration #208

test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_requirement_3_live_trading_unaffected PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #209
 TestStrategy.on_trading_iteration() completed normally for iteration #209

test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_trader_integration_quiet_logs_false PASSED [ 87%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #210
 TestStrategy.on_trading_iteration() completed normally for iteration #210

test_quiet_logs_requirements.py::TestQuietLogsRequirements::test_default_backtesting_quiet_logs_is_true PASSED [ 88%]
test_session_manager.py::TestSessionManager::test_backtesting_session_guarantees_time_progression PASSED [ 88%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #211
 TestStrategy.on_trading_iteration() completed normally for iteration #211

test_session_manager.py::TestSessionManager::test_backtesting_session_prevents_infinite_restart PASSED [ 88%] TestStrategy.on_trading_iteration() called - iteration #212
 TestStrategy.on_trading_iteration() completed normally for iteration #212

test_session_manager.py::TestSessionManager::test_data_source_agnostic_design PASSED [ 88%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #213
 TestStrategy.on_trading_iteration() completed normally for iteration #213

test_session_manager.py::TestSessionManager::test_live_trading_session_time_management PASSED [ 88%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #214
 TestStrategy.on_trading_iteration() completed normally for iteration #214

test_session_manager.py::TestSessionManager::test_session_architecture_separation_of_concerns PASSED [ 88%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #215
 TestStrategy.on_trading_iteration() completed normally for iteration #215

test_session_manager.py::TestSessionManager::test_session_replaces_problematic_run_trading_session PASSED [ 88%]
test_strategy_methods.py::TestStrategyMethods::test_get_option_expiration_after_date PASSED [ 88%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #217
 TestStrategy.on_trading_iteration() completed normally for iteration #217

test_strategy_methods.py::TestStrategyMethods::test_validate_order_with_none_quantity PASSED [ 88%]
test_strategy_methods.py::TestStrategyMethods::test_validate_order_with_zero_quantity PASSED [ 88%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #218
 TestStrategy.on_trading_iteration() completed normally for iteration #218

test_strategy_methods.py::TestStrategyMethods::test_validate_order_with_valid_quantity PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #219
 TestStrategy.on_trading_iteration() completed normally for iteration #219

test_strategy_methods.py::TestStrategyMethods::test_validate_order_with_none_order PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #220
 TestStrategy.on_trading_iteration() completed normally for iteration #220

test_strategy_methods.py::TestStrategyMethods::test_validate_order_with_invalid_order_type PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #221
 TestStrategy.on_trading_iteration() completed normally for iteration #221

test_strategy_methods.py::TestStrategyMethods::test_register_cron_callback_returns_job_id PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #222
 TestStrategy.on_trading_iteration() completed normally for iteration #222

test_strategy_methods.py::TestStrategyMethods::test_update_portfolio_value_with_missing_price PASSED [ 89%]
test_strategy_methods.py::TestStrategyMethods::test_register_cron_callback_adds_job_to_scheduler PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #223
 TestStrategy.on_trading_iteration() completed normally for iteration #223

test_strategy_methods.py::TestStrategyMethods::test_register_cron_callback_uses_broker_timezone PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #224
 TestStrategy.on_trading_iteration() completed normally for iteration #224

test_strategy_methods.py::TestStrategyMethods::test_register_cron_callback_does_nothing_in_backtesting PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #225
 TestStrategy.on_trading_iteration() completed normally for iteration #225

test_thetadata_helper.py::test_get_price_data_with_cached_data PASSED    [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #226
 TestStrategy.on_trading_iteration() completed normally for iteration #226

test_thetadata_helper.py::test_get_price_data_without_cached_data PASSED [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #227
 TestStrategy.on_trading_iteration() completed normally for iteration #227

test_thetadata_helper.py::test_get_price_data_partial_cache_hit PASSED   [ 89%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #228
 TestStrategy.on_trading_iteration() completed normally for iteration #228

test_thetadata_helper.py::test_get_price_data_empty_response PASSED      [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #229
 TestStrategy.on_trading_iteration() completed normally for iteration #229

test_thetadata_helper.py::test_get_trading_dates PASSED                  [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #230
 TestStrategy.on_trading_iteration() completed normally for iteration #230

test_thetadata_helper.py::test_build_cache_filename[ohlc] PASSED         [ 90%]
test_thetadata_helper.py::test_build_cache_filename[quote] PASSED        [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #231
 TestStrategy.on_trading_iteration() completed normally for iteration #231

test_thetadata_helper.py::test_missing_dates PASSED                      [ 90%]
test_thetadata_helper.py::test_update_cache[df_all0-df_cached0-ohlc] PASSED [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #233
 TestStrategy.on_trading_iteration() completed normally for iteration #233

test_thetadata_helper.py::test_update_cache[df_all1-df_cached1-quote] PASSED [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #234
 TestStrategy.on_trading_iteration() completed normally for iteration #234

test_thetadata_helper.py::test_load_data_from_cache[df_cached0-ohlc] PASSED [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #235
 TestStrategy.on_trading_iteration() completed normally for iteration #235

test_thetadata_helper.py::test_load_data_from_cache[df_cached1-quote] PASSED [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #236
 TestStrategy.on_trading_iteration() completed normally for iteration #236

test_thetadata_helper.py::test_update_df_with_empty_result PASSED        [ 90%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #237
 TestStrategy.on_trading_iteration() completed normally for iteration #237

test_thetadata_helper.py::test_update_df_empty_df_all_and_empty_result PASSED [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #238
 TestStrategy.on_trading_iteration() completed normally for iteration #238

test_thetadata_helper.py::test_update_df_empty_df_all_and_result_no_datetime PASSED [ 91%]
test_thetadata_helper.py::test_update_df_empty_df_all_with_new_data PASSED [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #239
 TestStrategy.on_trading_iteration() completed normally for iteration #239

test_thetadata_helper.py::test_update_df_existing_df_all_with_new_data PASSED [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #240
 TestStrategy.on_trading_iteration() completed normally for iteration #240

test_thetadata_helper.py::test_update_df_with_overlapping_data PASSED    [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #241
 TestStrategy.on_trading_iteration() completed normally for iteration #241

test_thetadata_helper.py::test_update_df_with_timezone_awareness PASSED  [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #242
 TestStrategy.on_trading_iteration() completed normally for iteration #242

test_thetadata_helper.py::test_start_theta_data_client PASSED            [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #248
 TestStrategy.on_trading_iteration() completed normally for iteration #248

test_thetadata_helper.py::test_check_connection PASSED                   [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #254
 TestStrategy.on_trading_iteration() completed normally for iteration #254

test_thetadata_helper.py::test_check_connection_with_exception PASSED    [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #255
 TestStrategy.on_trading_iteration() completed normally for iteration #255

test_thetadata_helper.py::test_get_request_successful PASSED             [ 91%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #259
 TestStrategy.on_trading_iteration() completed normally for iteration #259

test_thetadata_helper.py::test_get_request_non_200_status_code PASSED    [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #263
 TestStrategy.on_trading_iteration() completed normally for iteration #263

test_thetadata_helper.py::test_get_request_error_in_json PASSED          [ 92%]
test_thetadata_helper.py::test_get_request_exception_handling PASSED     [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #269
 TestStrategy.on_trading_iteration() completed normally for iteration #269

test_thetadata_helper.py::test_get_historical_data_stock PASSED          [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #270
 TestStrategy.on_trading_iteration() completed normally for iteration #270

test_thetadata_helper.py::test_get_historical_data_option PASSED         [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #271
 TestStrategy.on_trading_iteration() completed normally for iteration #271

test_thetadata_helper.py::test_get_historical_data_empty_response PASSED [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #272
 TestStrategy.on_trading_iteration() completed normally for iteration #272

test_thetadata_helper.py::test_get_historical_data_quote_style PASSED    [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #273
 TestStrategy.on_trading_iteration() completed normally for iteration #273

test_thetadata_helper.py::test_get_historical_data_ohlc_style_with_zero_in_response PASSED [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #274
 TestStrategy.on_trading_iteration() completed normally for iteration #274

test_thetadata_helper.py::test_get_expirations_normal_operation PASSED   [ 92%]
test_thetadata_helper.py::test_get_expirations_empty_response PASSED     [ 92%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #275
 TestStrategy.on_trading_iteration() completed normally for iteration #275

test_thetadata_helper.py::test_get_expirations_dates_before_after_date PASSED [ 92%] TestStrategy.on_trading_iteration() called - iteration #276
 TestStrategy.on_trading_iteration() completed normally for iteration #276

test_thetadata_helper.py::test_get_strikes_normal_operation PASSED       [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #277
 TestStrategy.on_trading_iteration() completed normally for iteration #277

test_thetadata_helper.py::test_get_strikes_empty_response PASSED         [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #278
 TestStrategy.on_trading_iteration() completed normally for iteration #278

test_thetadata_helper.py::TestThetaDataProcessHealthCheck::test_process_alive_detection_real_process PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #281
 TestStrategy.on_trading_iteration() completed normally for iteration #281

test_thetadata_helper.py::TestThetaDataProcessHealthCheck::test_force_kill_and_auto_restart PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #291
 TestStrategy.on_trading_iteration() completed normally for iteration #291

test_thetadata_helper.py::TestThetaDataProcessHealthCheck::test_data_fetch_after_process_restart PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #298
 TestStrategy.on_trading_iteration() completed normally for iteration #298

test_thetadata_helper.py::TestThetaDataProcessHealthCheck::test_multiple_rapid_restarts PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #316
 TestStrategy.on_trading_iteration() completed normally for iteration #316

test_thetadata_helper.py::TestThetaDataProcessHealthCheck::test_process_dies_during_data_fetch PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #322
 TestStrategy.on_trading_iteration() completed normally for iteration #322

test_thetadata_helper.py::TestThetaDataProcessHealthCheck::test_process_never_started PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #326
 TestStrategy.on_trading_iteration() completed normally for iteration #326

test_thetadata_helper.py::TestThetaDataChainsCaching::test_chains_cached_basic_structure PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #327
 TestStrategy.on_trading_iteration() completed normally for iteration #327

test_thetadata_helper.py::TestThetaDataChainsCaching::test_chains_cache_reuse PASSED [ 93%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #334
 TestStrategy.on_trading_iteration() completed normally for iteration #334

test_thetadata_helper.py::TestThetaDataChainsCaching::test_chains_strike_format PASSED [ 94%]
test_tradier.py::TestTradierBrokerAPI::test_get_last_price SKIPPED (...) [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #335
 TestStrategy.on_trading_iteration() completed normally for iteration #335

test_tradier.py::TestTradierBrokerAPI::test_submit_order SKIPPED (Th...) [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #336
 TestStrategy.on_trading_iteration() completed normally for iteration #336

test_tradier.py::TestTradierBroker::test_basics PASSED                   [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #337
 TestStrategy.on_trading_iteration() completed normally for iteration #337

test_tradier.py::TestTradierBroker::test_modify_order PASSED             [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #338
 TestStrategy.on_trading_iteration() completed normally for iteration #338

test_tradier.py::TestTradierBroker::test_tradier_side2lumi PASSED        [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #339
 TestStrategy.on_trading_iteration() completed normally for iteration #339

test_tradier.py::TestTradierBroker::test_lumi_side2tradier PASSED        [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #340
 TestStrategy.on_trading_iteration() completed normally for iteration #340

test_tradier.py::TestTradierBroker::test_pull_broker_all_orders PASSED   [ 94%]
test_tradier.py::TestTradierBroker::test_parse_broker_order PASSED       [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #341
 TestStrategy.on_trading_iteration() completed normally for iteration #341

test_tradier.py::TestTradierBroker::test_oco_parse_broker_order PASSED   [ 94%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #342
 TestStrategy.on_trading_iteration() completed normally for iteration #342

test_tradier.py::TestTradierBroker::test_do_polling SKIPPED (Complex...) [ 94%]
test_tradingfee.py::TestTradingFee::test_init PASSED                     [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #343
 TestStrategy.on_trading_iteration() completed normally for iteration #343

test_tradovate.py::TestTradovateImports::test_tradovate_broker_import PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #344
 TestStrategy.on_trading_iteration() completed normally for iteration #344

test_tradovate.py::TestTradovateImports::test_tradovate_data_source_import PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #345
 TestStrategy.on_trading_iteration() completed normally for iteration #345

test_tradovate.py::TestTradovateImports::test_tradovate_exception_import PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #346
 TestStrategy.on_trading_iteration() completed normally for iteration #346

test_tradovate.py::TestTradovateImports::test_old_misspelling_not_accessible PASSED [ 95%]
test_tradovate.py::TestTradovateConfiguration::test_tradovate_config_structure PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #347
 TestStrategy.on_trading_iteration() completed normally for iteration #347

test_tradovate.py::TestTradovateConfiguration::test_tradovate_config_default_values PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #348
 TestStrategy.on_trading_iteration() completed normally for iteration #348

test_tradovate.py::TestTradovateConfiguration::test_environment_variable_names SKIPPED [ 95%]
test_tradovate.py::TestTradovateConfiguration::test_tradovate_env_var_prefix PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #349
 TestStrategy.on_trading_iteration() completed normally for iteration #349

test_tradovate.py::TestTradovateBroker::test_broker_class_attributes PASSED [ 95%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #350
 TestStrategy.on_trading_iteration() completed normally for iteration #350

test_tradovate.py::TestTradovateBroker::test_broker_has_required_methods PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #351
 TestStrategy.on_trading_iteration() completed normally for iteration #351

test_tradovate.py::TestTradovateBroker::test_broker_config_validation PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #352
 TestStrategy.on_trading_iteration() completed normally for iteration #352

test_tradovate.py::TestTradovateBroker::test_broker_handles_missing_credentials PASSED [ 96%]
test_tradovate.py::TestTradovateDataSource::test_data_source_attributes PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #353
 TestStrategy.on_trading_iteration() completed normally for iteration #353

test_tradovate.py::TestTradovateDataSource::test_data_source_initialization PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #354
 TestStrategy.on_trading_iteration() completed normally for iteration #354

test_tradovate.py::TestTradovateSymbolConversion::test_continuous_futures_symbol_resolution PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #355
 TestStrategy.on_trading_iteration() completed normally for iteration #355

test_tradovate.py::TestTradovateSymbolConversion::test_order_symbol_extraction PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #356
 TestStrategy.on_trading_iteration() completed normally for iteration #356

test_tradovate.py::TestTradovateIntegration::test_end_to_end_order_flow PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #357
 TestStrategy.on_trading_iteration() completed normally for iteration #357

test_tradovate.py::TestTradovateSymbolResolution::test_tradovate_symbol_format PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #358
 TestStrategy.on_trading_iteration() completed normally for iteration #358

test_tradovate.py::TestTradovateSymbolResolution::test_tradovate_converts_specific_contract_to_single_digit PASSED [ 96%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #359
 TestStrategy.on_trading_iteration() completed normally for iteration #359

test_tradovate.py::TestTradovateSymbolResolution::test_tradovate_vs_standard_symbol_difference PASSED [ 97%]
test_tradovate.py::TestTradovateAPIPayload::test_limit_order_payload_format PASSED [ 97%] TestStrategy.on_trading_iteration() called - iteration #360
 TestStrategy.on_trading_iteration() completed normally for iteration #360

test_tradovate.py::TestTradovateAPIPayload::test_stop_order_payload_format PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #361
 TestStrategy.on_trading_iteration() completed normally for iteration #361

test_tradovate.py::TestTradovateTokenRenewal::test_token_renewal_on_expiry PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #362
 TestStrategy.on_trading_iteration() completed normally for iteration #362

test_tradovate.py::TestTradovateTokenRenewal::test_automatic_retry_on_401 PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #363
 TestStrategy.on_trading_iteration() completed normally for iteration #363

test_tradovate.py::TestTradovateTokenRenewal::test_get_balances_with_token_renewal SKIPPED [ 97%]
test_tradovate.py::TestTradovateTokenRenewal::test_proactive_token_check PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #364
 TestStrategy.on_trading_iteration() completed normally for iteration #364

test_tradovate.py::TestTradovateTokenRenewal::test_token_not_renewed_when_fresh PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #365
 TestStrategy.on_trading_iteration() completed normally for iteration #365

test_unified_logger.py::TestBasicLogging::test_logger_hierarchy PASSED   [ 97%]
test_unified_logger.py::TestBasicLogging::test_logger_already_starts_with_lumibot PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #366
 TestStrategy.on_trading_iteration() completed normally for iteration #366

test_unified_logger.py::TestBasicLogging::test_strategy_logger_prefix PASSED [ 97%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #367
 TestStrategy.on_trading_iteration() completed normally for iteration #367

test_unified_logger.py::TestBasicLogging::test_strategy_logger_update_name PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #368
 TestStrategy.on_trading_iteration() completed normally for iteration #368

test_unified_logger.py::TestCSVErrorHandler::test_csv_handler_initialization PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #369
 TestStrategy.on_trading_iteration() completed normally for iteration #369

test_unified_logger.py::TestCSVErrorHandler::test_csv_file_creation PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #370
 TestStrategy.on_trading_iteration() completed normally for iteration #370

test_unified_logger.py::TestCSVErrorHandler::test_error_deduplication PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #371
 TestStrategy.on_trading_iteration() completed normally for iteration #371

test_unified_logger.py::TestCSVErrorHandler::test_error_details_normalization PASSED [ 98%]
test_unified_logger.py::TestLoggerConfiguration::test_set_log_level PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #372
 TestStrategy.on_trading_iteration() completed normally for iteration #372

test_unified_logger.py::TestLoggerConfiguration::test_invalid_log_level PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #373
 TestStrategy.on_trading_iteration() completed normally for iteration #373

test_unified_logger.py::TestLoggerFormatter::test_formatter_creates_different_formats PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #374
 TestStrategy.on_trading_iteration() completed normally for iteration #374

test_unified_logger.py::TestLoggerFormatter::test_message_cleaning PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #375
 TestStrategy.on_trading_iteration() completed normally for iteration #375

test_unified_logger.py::TestThreadSafety::test_concurrent_csv_logging PASSED [ 98%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #376
 TestStrategy.on_trading_iteration() completed normally for iteration #376

test_unified_logger.py::TestEnvironmentVariables::test_backtesting_quiet_logs PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #377
 TestStrategy.on_trading_iteration() completed normally for iteration #377

test_vix_helper.py::TestVixHelperImport::test_numpy_nan_compatibility PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #378
 TestStrategy.on_trading_iteration() completed normally for iteration #378

test_vix_helper.py::TestVixHelperImport::test_pandas_ta_import_with_numpy_2 PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #379
 TestStrategy.on_trading_iteration() completed normally for iteration #379

test_vix_helper.py::TestVixHelper::test_check_max_vix_1d PASSED          [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #380
 TestStrategy.on_trading_iteration() completed normally for iteration #380

test_vix_helper.py::TestVixHelper::test_get_vix_rsi_value PASSED         [ 99%]
test_vix_helper.py::TestVixHelper::test_get_vix_value PASSED             [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #381
 TestStrategy.on_trading_iteration() completed normally for iteration #381

test_vix_helper.py::TestVixHelper::test_vix_helper_initialization PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #382
 TestStrategy.on_trading_iteration() completed normally for iteration #382

test_vix_helper.py::TestVixHelper::test_vix_percentile_calculation PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #383
 TestStrategy.on_trading_iteration() completed normally for iteration #383

test_vix_helper.py::TestNumPyCompatibility::test_module_import_order_independence PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #384
 TestStrategy.on_trading_iteration() completed normally for iteration #384

test_vix_helper.py::TestNumPyCompatibility::test_numpy_nan_alias_creation PASSED [ 99%] MockLiveBroker.is_market_open() called - returning True
 TestStrategy.on_trading_iteration() called - iteration #385
 TestStrategy.on_trading_iteration() completed normally for iteration #385

test_vix_helper.py::TestNumPyCompatibility::test_pandas_operations_with_nan PASSED [100%]

=============================== warnings summary ===============================
../../../../../../../../opt/homebrew/lib/python3.12/site-packages/dateutil/tz/tz.py:37
  /opt/homebrew/lib/python3.12/site-packages/dateutil/tz/tz.py:37: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).
    EPOCH = datetime.datetime.utcfromtimestamp(0)

../../../../../../../../opt/homebrew/lib/python3.12/site-packages/websockets/legacy/__init__.py:6
  /opt/homebrew/lib/python3.12/site-packages/websockets/legacy/__init__.py:6: DeprecationWarning: websockets.legacy is deprecated; see https://websockets.readthedocs.io/en/stable/howto/upgrade.html for upgrade instructions
    warnings.warn(  # deprecated in 14.0 - 2024-11-09

../../../../../../../../opt/homebrew/lib/python3.12/site-packages/polygon/websocket/__init__.py:10
  /opt/homebrew/lib/python3.12/site-packages/polygon/websocket/__init__.py:10: DeprecationWarning: websockets.client.connect is deprecated
    from websockets.client import connect, WebSocketClientProtocol

../../../../../../../../opt/homebrew/lib/python3.12/site-packages/polygon/websocket/__init__.py:10
  /opt/homebrew/lib/python3.12/site-packages/polygon/websocket/__init__.py:10: DeprecationWarning: websockets.client.WebSocketClientProtocol is deprecated
    from websockets.client import connect, WebSocketClientProtocol

tests/backtest/test_thetadata.py: 5 warnings
tests/backtest/test_thetadata_comprehensive.py: 9 warnings
tests/backtest/test_thetadata_vs_polygon.py: 6 warnings
tests/test_options_helper.py: 4 warnings
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/lumibot/backtesting/thetadata_backtesting.py:214: FutureWarning:
  
  DataFrame.fillna with 'method' is deprecated and will raise in a future version. Use obj.ffill() or obj.bfill() instead.

tests/test_alpaca_backtesting.py: 569 warnings
tests/test_databento_data.py: 4 warnings
tests/test_drift_rebalancer.py: 54 warnings
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/lumibot/entities/bars.py:231: SettingWithCopyWarning:
  
  
  A value is trying to be set on a copy of a slice from a DataFrame.
  Try using .loc[row_indexer,col_indexer] = value instead
  
  See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/lumibot/entities/bars.py:231: FutureWarning:
  
  The default fill_method='pad' in Series.pct_change is deprecated and will be removed in a future version. Either fill in any non-leading NA values prior to calling pct_change or specify 'fill_method=None' to not fill NA values.

tests/test_backtesting_data_source_env.py: 12 warnings
  /opt/homebrew/lib/python3.12/site-packages/numpy/lib/_function_base_impl.py:3045: RuntimeWarning:
  
  invalid value encountered in divide

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /opt/homebrew/lib/python3.12/site-packages/numpy/lib/_function_base_impl.py:3046: RuntimeWarning:
  
  invalid value encountered in divide

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /opt/homebrew/lib/python3.12/site-packages/scipy/stats/_distn_infrastructure.py:2304: RuntimeWarning:
  
  invalid value encountered in multiply

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /opt/homebrew/lib/python3.12/site-packages/scipy/stats/_distn_infrastructure.py:2305: RuntimeWarning:
  
  invalid value encountered in multiply

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_yahoo
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_explicit_datasource_overrides_env
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /Users/robertgrzesik/Documents/Development/quantstats_lumi/quantstats_lumi/_plotting/wrappers.py:542: FutureWarning:
  
  'Y' is deprecated and will be removed in a future version, please use 'YE' instead.

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_yahoo
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_explicit_datasource_overrides_env
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /Users/robertgrzesik/Documents/Development/quantstats_lumi/quantstats_lumi/_plotting/wrappers.py:544: FutureWarning:
  
  'Y' is deprecated and will be removed in a future version, please use 'YE' instead.

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_yahoo
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_explicit_datasource_overrides_env
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /Users/robertgrzesik/Documents/Development/quantstats_lumi/quantstats_lumi/_plotting/wrappers.py:552: FutureWarning:
  
  'Y' is deprecated and will be removed in a future version, please use 'YE' instead.

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_yahoo
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_explicit_datasource_overrides_env
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /Users/robertgrzesik/Documents/Development/quantstats_lumi/quantstats_lumi/_plotting/wrappers.py:555: FutureWarning:
  
  'Y' is deprecated and will be removed in a future version, please use 'YE' instead.

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /Users/robertgrzesik/Documents/Development/quantstats_lumi/quantstats_lumi/_plotting/core.py:964: UserWarning:
  
  Attempting to set identical low and high ylims makes transformation singular; automatically expanding.

tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_polygon_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_thetadata_case_insensitive
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_auto_select_yahoo
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_explicit_datasource_overrides_env
tests/test_backtesting_data_source_env.py::TestBacktestingDataSourceEnv::test_default_thetadata_when_no_env_set
  /Users/robertgrzesik/Documents/Development/quantstats_lumi/quantstats_lumi/_plotting/core.py:1041: FutureWarning:
  
  'Y' is deprecated and will be removed in a future version, please use 'YE' instead.

tests/test_databento_live.py::test_symbol_resolution
  /opt/homebrew/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning:
  
  Test functions should return None, but tests/test_databento_live.py::test_symbol_resolution returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.

tests/test_databento_live.py::test_live_api_connection
  /opt/homebrew/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning:
  
  Test functions should return None, but tests/test_databento_live.py::test_live_api_connection returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.

tests/test_databento_live.py::test_minute_bar_aggregation
  /opt/homebrew/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning:
  
  Test functions should return None, but tests/test_databento_live.py::test_minute_bar_aggregation returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.

tests/test_databento_live.py::test_api_routing
  /opt/homebrew/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning:
  
  Test functions should return None, but tests/test_databento_live.py::test_api_routing returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.

tests/test_databento_live.py::test_long_time_periods
  /opt/homebrew/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning:
  
  Test functions should return None, but tests/test_databento_live.py::test_long_time_periods returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.

tests/test_databento_live.py::test_continuous_latency_monitoring
  /opt/homebrew/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning:
  
  Test functions should return None, but tests/test_databento_live.py::test_continuous_latency_monitoring returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.

tests/test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_alpaca_modern_way
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_drift_rebalancer.py:2119: FutureWarning:
  
  Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`

tests/test_drift_rebalancer.py::TestDriftRebalancer::test_crypto_50_50_with_alpaca_with_fees
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_drift_rebalancer.py:2204: FutureWarning:
  
  Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  No data found for the request you submitted.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MES.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MES1!.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MES.C.0.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MESU5.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MES.U5.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MESZ4.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MES.Z4.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MESH5.

tests/test_mes_symbols.py::TestMESSymbols::test_mes_symbol_availability
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_mes_symbols.py:56: BentoWarning:
  
  The streaming request had one or more symbols which did not resolve: MES.H5.

tests/test_projectx_timestep_alias.py::test_projectx_get_bars_accepts_timestep_alias
tests/test_projectx_timestep_alias.py::test_projectx_get_bars_accepts_timestep_alias
  /Users/robertgrzesik/Documents/Development/lumivest_bot_server/strategies/lumibot/tests/test_projectx_timestep_alias.py:12: FutureWarning:
  
  'T' is deprecated and will be removed in a future version, please use 'min' instead.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
= 1013 passed, 16 skipped, 7 xfailed, 5 xpassed, 748 warnings in 1060.90s (0:17:40) =
